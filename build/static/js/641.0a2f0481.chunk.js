"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[641,912,740],{99408:function(e,t,s){s.d(t,{Z:function(){return d}});var r=s(40008),a=s(59305),n=s(30390).lX(),o=s(15471),i=s(13085),l=r.Z.create({baseURL:a.CT,timeout:6e4}),c="/auth/login";l.interceptors.request.use((function(e){var t=localStorage.getItem(o.UA);return t&&(e.headers.authorization=t),t||e.headers["public-request"]||(n.push(c),window.location.reload()),e}),(function(e){i.Z.error({message:"Error"}),Promise.reject(e)})),l.interceptors.response.use((function(e){return e.data}),(function(e){var t={message:""};return 400!==e.response.status&&403!==e.response.status||(t.message="Authentication Fail",t.description="Please login again",localStorage.removeItem(o.UA),n.push(c),window.location.reload()),404===e.response.status&&(t.message="Not Found"),500===e.response.status&&(t.message="Internal Server Error"),508===e.response.status&&(t.message="Time Out"),i.Z.error(t),Promise.reject(e)}));var u=l,m={login:function(e){return u({url:"/posts",method:"post",headers:{"public-request":"true"},data:e})},signUp:function(e){return u({url:"/auth/signup",method:"post",headers:{"public-request":"true"},data:e})}},d=m},84912:function(e,t,s){s.r(t);var r=s(1413),a=(s(72791),s(54153)),n=s(66106),o=s(30914),i=s(66871),l=s(60364),c=s(80184),u={backgroundImage:"url(/img/others/img-17.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover"};t.default=function(e){var t=(0,l.v9)((function(e){return e.theme.currentTheme}));return(0,c.jsx)("div",{className:"h-100",style:u,children:(0,c.jsx)("div",{className:"container d-flex flex-column justify-content-center h-100",children:(0,c.jsx)(n.Z,{justify:"center",children:(0,c.jsx)(o.Z,{xs:20,sm:20,md:20,lg:7,children:(0,c.jsx)(i.Z,{children:(0,c.jsxs)("div",{className:"my-4",children:[(0,c.jsx)("div",{className:"text-center",children:(0,c.jsx)("img",{className:"img-fluid",src:"/img/".concat("light"===t?"grand-energy-logo.png":"grand-energy-logo-white.png"),alt:""})}),(0,c.jsx)(n.Z,{justify:"center",children:(0,c.jsx)(o.Z,{xs:24,sm:24,md:20,lg:20,children:(0,c.jsx)(a.Z,(0,r.Z)({},e))})})]})})})})})})}},38740:function(e,t,s){s.r(t);var r=s(1413),a=(s(72791),s(54153)),n=s(66106),o=s(30914),i=s(60364),l=s(88515),c=s(80184),u={backgroundImage:"url(".concat("/img/others/img-login.jpg",")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",boxShadow:"inset 0 0 0 1000px rgba(87, 114, 255, 0.8)"};t.default=function(e){var t=(0,i.v9)((function(e){return e.theme.currentTheme}));(0,l.k6)(),(0,l.$B)();return(0,c.jsx)("div",{className:"h-100 ".concat("light"===t?"bg-white":""),children:(0,c.jsxs)(n.Z,{justify:"center",className:"align-items-stretch h-100",children:[(0,c.jsx)(o.Z,{xs:0,sm:0,md:0,lg:8,children:(0,c.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100 px-4 pt-2",style:u,children:[(0,c.jsx)("div",{className:"text-left",children:(0,c.jsx)("img",{src:"/img/grand-energy-logo-white.png",alt:"logo",style:{height:"60px"}})}),(0,c.jsx)(n.Z,{justify:"center"}),(0,c.jsx)("div",{className:"d-flex justify-content-end pb-4",children:(0,c.jsx)("div",{})})]})}),(0,c.jsx)(o.Z,{xs:20,sm:20,md:24,lg:16,children:(0,c.jsx)("div",{className:"container d-flex flex-column justify-content-center h-100",children:(0,c.jsx)(n.Z,{justify:"center",children:(0,c.jsxs)(o.Z,{xs:24,sm:24,md:20,lg:12,xl:8,children:[(0,c.jsx)("h1",{children:"Sign In"}),(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)(a.Z,(0,r.Z)({},e))})]})})})})]})})}},66641:function(e,t,s){s.r(t);s(72791),s(84912);var r=s(38740),a=s(80184);t.default=function(){return(0,a.jsx)(r.default,{allowRedirect:!0})}},54153:function(e,t,s){s.d(t,{Z:function(){return w}});var r=s(29439),a=s(72791),n=s(60364),o=s(33441),i=s(73332),l=s(49389),c=s(87309),u=s(99214),m=s(38999),d=(s(67471),s(80184)),g=s(80680),h=(s(99408),s(88515)),p=s(26872),x=s(40008),f=function(e){var t=(0,h.k6)(),s=(0,a.useState)(!1),n=(0,r.Z)(s,2),g=(n[0],n[1],localStorage.getItem("token")),f=(e.otherSignIn,e.showForgetPassword),j=e.hideAuthMessage,w=e.onForgetPasswordClick,v=e.showLoading,Z=e.extra,y=(e.loading,e.showMessage),S=e.message,I=(e.authenticated,e.showAuthMessage,e.redirect),k=e.allowRedirect;return(0,a.useEffect)((function(){g&&k&&(void(0,x.Z)({method:"get",url:"/api/getLoggedInUsersDetails",headers:{Authorization:"Bearer ".concat(g)},data:{}}).then((function(e){return!!e.data.success})).catch((function(e){return console.log(e.message),401==e.status?localStorage.clear():S.error("Something went wrong! please try again later"),!1}))&&t.push(I),t.push(I));y&&setTimeout((function(){j()}),3e3)}),[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p.ww.div,{initial:{opacity:0,marginBottom:0},animate:{opacity:y?1:0,marginBottom:y?20:0},children:(0,d.jsx)(o.Z,{type:"error",showIcon:!0,message:S})}),(0,d.jsxs)(i.Z,{layout:"vertical",name:"login-form",onFinish:function(e){(0,x.Z)({method:"post",url:"/api/mobile-app/login",data:{email:e.email,password:e.password,grandEneryCustomer:!0}}).then((function(e){v(!1);var s=e.data;if(console.log(s),s.token.token){var r=s.user,a=s.customer,n=s.customer_user;return console.log(r),localStorage.clear(),x.Z.defaults.headers.common.Authorization="Bearer "+e.data.token.token,localStorage.setItem("token",s.token.token),localStorage.setItem("user_id",r.id),localStorage.setItem("customer_id",a.id),localStorage.setItem("customer_name",a.name),localStorage.setItem("associate_user_id",n.id),localStorage.setItem("name",n.name),localStorage.setItem("email",n.email),localStorage.setItem("profile_pic",n.profile_pic),t.push(I),!0}return s.errors?(console.log(s.errors.message),S.error(s.errors.message)):S.error("Something went wrong! please try again later"),!1})).catch((function(e){return console.log(e),localStorage.removeItem("name"),localStorage.removeItem("email"),localStorage.removeItem("profile_pic"),!1}))},children:[(0,d.jsx)(i.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email"},{type:"email",message:"Please enter a validate email!"}],children:(0,d.jsx)(l.Z,{prefix:(0,d.jsx)(u.Z,{className:"text-primary"})})}),(0,d.jsx)(i.Z.Item,{name:"password",label:(0,d.jsxs)("div",{className:"".concat(f?"d-flex justify-content-between w-100 align-items-center":""),children:[(0,d.jsx)("span",{children:"Password"}),f&&(0,d.jsx)("span",{onClick:function(){return w},className:"cursor-pointer font-size-sm font-weight-normal text-muted",children:"Forget Password?"})]}),rules:[{required:!0,message:"Please input your password"}],children:(0,d.jsx)(l.Z.Password,{prefix:(0,d.jsx)(m.Z,{className:"text-primary"})})}),(0,d.jsx)(i.Z.Item,{children:(0,d.jsx)(c.Z,{type:"primary",htmlType:"submit",block:!0,children:"Sign In"})}),Z]})]})};f.defaultProps={otherSignIn:!0,showForgetPassword:!1};var j={showAuthMessage:g.dV,showLoading:g.QP,hideAuthMessage:g.oj,authenticated:g.x9},w=(0,n.$j)((function(e){var t=e.auth;return{loading:t.loading,message:t.message,showMessage:t.showMessage,token:t.token,redirect:t.redirect}}),j)(f)}}]);
//# sourceMappingURL=641.0a2f0481.chunk.js.map