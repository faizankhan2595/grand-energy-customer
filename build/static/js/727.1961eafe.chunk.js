"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[727],{25008:function(e,t,n){n.d(t,{bd:function(){return i},kQ:function(){return a},qz:function(){return s}});var i=["font","header","bold","italic","underline","strike","blockquote","color","background","script","super","list","bullet","indent","link","image"],s={toolbar:[[{font:[]}],[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"]]},a="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like AldusPageMaker including versions of Lorem Ipsum Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like AldusPageMaker including versions of Lorem IpsumLorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining"},82727:function(e,t,n){n.r(t),n.d(t,{default:function(){return Et}});var i=n(72791),s=n(88515),a=n(59305),o=n(29439),l=n(81541),c=n(87309),r=n(88894),d=n(89215),u=n(64946),m=n(61202),x=n(83746),h=n(67471),_=n(92492),j=n(29450),f=(n(99587),n(81838)),p=n(80184),v=(f.Z,n(71229),j.Z.Title,n(4942)),g=n(1413),Z=n(93433),b=n(49389),y=n(13295),N=n(87462),S=n(14824),C=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n},w=y.Z.TimePicker,k=y.Z.RangePicker,I=i.forwardRef((function(e,t){return i.createElement(k,(0,N.Z)({},e,{dropdownClassName:e.popupClassName,picker:"time",mode:void 0,ref:t}))})),D=i.forwardRef((function(e,t){var n=e.addon,s=e.renderExtraFooter,a=e.popupClassName,o=C(e,["addon","renderExtraFooter","popupClassName"]),l=i.useMemo((function(){return s||(n?((0,S.Z)(!1,"TimePicker","`addon` is deprecated. Please use `renderExtraFooter` instead."),n):void 0)}),[n,s]);return i.createElement(w,(0,N.Z)({},o,{dropdownClassName:a,mode:void 0,ref:t,renderExtraFooter:l}))}));D.displayName="TimePicker",D.RangePicker=I;var Y=D,P=n(50419),q=n(78756),A=n(50881),F=n(40872),M=function(){return(0,p.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,p.jsx)("g",{clipPath:"url(#clip0_3143_14787)",children:(0,p.jsx)("path",{d:"M10.1667 5.66667C13.325 5.66667 16.1417 7.44167 17.5167 10.25C16.1417 13.0583 13.325 14.8333 10.1667 14.8333C7.00833 14.8333 4.19167 13.0583 2.81667 10.25C4.19167 7.44167 7.00833 5.66667 10.1667 5.66667ZM10.1667 4C6 4 2.44167 6.59167 1 10.25C2.44167 13.9083 6 16.5 10.1667 16.5C14.3333 16.5 17.8917 13.9083 19.3333 10.25C17.8917 6.59167 14.3333 4 10.1667 4ZM10.1667 8.16667C11.3167 8.16667 12.25 9.1 12.25 10.25C12.25 11.4 11.3167 12.3333 10.1667 12.3333C9.01667 12.3333 8.08333 11.4 8.08333 10.25C8.08333 9.1 9.01667 8.16667 10.1667 8.16667ZM10.1667 6.5C8.1 6.5 6.41667 8.18333 6.41667 10.25C6.41667 12.3167 8.1 14 10.1667 14C12.2333 14 13.9167 12.3167 13.9167 10.25C13.9167 8.18333 12.2333 6.5 10.1667 6.5Z",fill:"#455560"})}),(0,p.jsx)("defs",{children:(0,p.jsx)("clipPath",{id:"clip0_3143_14787",children:(0,p.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})},O=function(){return(0,p.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,p.jsx)("g",{clipPath:"url(#clip0_3143_14797)",children:(0,p.jsx)("path",{d:"M11.2167 8.01667L11.9833 8.78333L4.43333 16.3333H3.66667V15.5667L11.2167 8.01667ZM14.2167 3C14.0083 3 13.7917 3.08333 13.6333 3.24167L12.1083 4.76667L15.2333 7.89167L16.7583 6.36667C17.0833 6.04167 17.0833 5.51667 16.7583 5.19167L14.8083 3.24167C14.6417 3.075 14.4333 3 14.2167 3ZM11.2167 5.65833L2 14.875V18H5.125L14.3417 8.78333L11.2167 5.65833Z",fill:"#455560"})}),(0,p.jsx)("defs",{children:(0,p.jsx)("clipPath",{id:"clip0_3143_14797",children:(0,p.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})},T=(b.Z.TextArea,function(e){e.setOpenContractModal,e.id;var t=e.quotationData,n=(e.quoteData,e.setQuoteData),i=(e.getQuotations,e.setOpenStatusModal),a=(0,s.k6)(),o=(0,s.$B)();return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(F.Z,{menu:(0,p.jsxs)(f.Z,{children:[(0,p.jsx)(f.Z.Item,{onClick:function(){a.push("".concat(o.path,"/view-quotation/").concat(t.id))},children:(0,p.jsxs)("span",{className:"d-flex align-items-center",children:[(0,p.jsx)(u.Z,{className:"mr-2",component:M})," View Quotation"]})}),(0,p.jsx)(f.Z.Item,{onClick:function(){n((0,g.Z)((0,g.Z)({},t),{},{quotation_id:t.id,customer_id:t.customer_id,customer_job_site_id:t.jobsite_id})),i(!0)},disabled:"Contract Generated"===t.status,children:(0,p.jsxs)("span",{className:"d-flex align-items-center",children:[(0,p.jsx)(u.Z,{className:"mr-2",component:O})," Quotation Status"]})})]})})})}),E=n(40008),R=n(72426),B=n.n(R),L=b.Z.TextArea,J=function(e){e.setsetPage,e.statuses;var t=e.searchText,n=e.selectedFilter,s=e.selectedCustomerFilter,a=e.selectedJobsiteFilter,r=e.selectedStatusFilter,u=(0,i.useState)([]),m=(0,o.Z)(u,2),x=m[0],h=m[1],_=(0,i.useState)(!1),j=(0,o.Z)(_,2),f=(j[0],j[1]),Z=localStorage.getItem("customer_id"),b=(0,i.useState)(!1),N=(0,o.Z)(b,2),S=N[0],C=N[1],w=(0,i.useState)(null),k=(0,o.Z)(w,2),I=k[0],D=k[1],Y=(0,i.useState)(!1),F=(0,o.Z)(Y,2),M=F[0],O=F[1],R=(0,i.useState)(!1),J=(0,o.Z)(R,2),Q=(J[0],J[1]),V=(0,i.useState)([]),H=(0,o.Z)(V,2),W=H[0],U=H[1],z=(0,i.useState)(!1),G=(0,o.Z)(z,2),K=G[0],X=G[1],$=(0,i.useState)(!1),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],ie=(0,i.useState)("Accepted"),se=(0,o.Z)(ie,2),ae=se[0],oe=se[1],le=(0,i.useState)(!1),ce=(0,o.Z)(le,2),re=ce[0],de=ce[1],ue=[{title:"Quotation Id",dataIndex:"id"},{title:"Customer Name",dataIndex:"customerName"},{title:"Jobsite",dataIndex:"jobsite",render:function(e,t){return(0,p.jsx)("span",{children:t.jobsite||"-"})}},{title:"Inquiry Date",dataIndex:"inquiryDate"},{title:"Quotation Date",dataIndex:"quotationDate"},{title:"Amount(S$)",dataIndex:"amount"},{title:"Status",dataIndex:"status",render:function(e,t){return"Accepted"===t.status?(0,p.jsx)("span",{style:{color:"#00AB6F",backgroundColor:"#01D2891A",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:"Quote Accepted"}):"Contract Generated"===t.status?(0,p.jsx)("span",{style:{color:"#5772FF",backgroundColor:"#5772FF1A",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:"Contract Generated"}):"Rejected"===t.status?(0,p.jsx)("span",{style:{color:"#F53434",backgroundColor:"#FFF2F2",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:"Quote Rejected"}):(0,p.jsx)("span",{style:{color:"#0698A6",backgroundColor:"#07B1C11A",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:"Quote Received"})}},{title:"Action",dataIndex:"",key:"x",render:function(e,t){return(0,p.jsx)(T,{setOpenContractModal:C,id:t.id,quotationData:t,setOpenStatusModal:ne,setQuoteData:D,getQuotations:xe})}}],me=function(){console.log(I),E.Z.post("/api/tc/update-quotation",(0,g.Z)((0,g.Z)({},I),{},{id:I.id,tc_customer_id:I.customer_id,status:"Contract Generated"})).then((function(e){var t=e.data;console.log(t),xe()})).catch((function(e){console.log(e)}))},xe=function(){E.Z.post("/api/tc/get-quotations",{page_index:1,page_size:15,statuses:[],search:t||"",customer_id:Z}).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){return{key:t,id:e.id,customer_id:e.tc_customer_id,jobsite_id:e.tc_customer_job_site_id,customerName:e.customer_name,jobsite:e.jobsite_name,inquiryDate:e.inquiry_date?B()(e.inquiry_date).format("DD-MM-YYYY HH:mm A"):"-",quotationDate:B()(e.task_period_from_date).format("DD-MM-YYYY"),amount:e.total,status:e.status||"Quote Sent",tc_customer_id:e.tc_customer_id,task_period_from_date:B()(e.task_period_from_date),task_period_to_date:B()(e.task_period_to_date),due_date:B()(e.due_date),sub_total:e.sub_total||0,tax:e.gst||8,discount:e.discount||0,total:e.total,tc_quotation_file:e.tc_quotation_file,quotation_remarks:e.quotation_remarks||"",line_items:e.line_items||[]}}));h(n.reverse())})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){E.Z.post("/api/tc/get-quotations",(0,v.Z)({page_index:1,page_size:15,statuses:[],search:t||"",customer_id:s||null,job_site_id:a||null,status:r||null},"customer_id",Z)).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){return{key:t,id:e.id,customer_id:e.tc_customer_id,jobsite_id:e.tc_customer_job_site_id,customerName:e.customer_name,jobsite:e.job_site_name,inquiryDate:e.inquiry_date?B()(e.inquiry_date).format("DD-MM-YYYY HH:mm A"):"-",quotationDate:B()(e.task_period_from_date).format("DD-MM-YYYY"),amount:e.total,status:e.status||"Quote Sent",tc_customer_id:e.tc_customer_id,task_period_from_date:B()(e.task_period_from_date),task_period_to_date:B()(e.task_period_to_date),due_date:B()(e.due_date),sub_total:e.sub_total||0,tax:e.gst||8,discount:e.discount||0,total:e.total,tc_quotation_file:e.tc_quotation_file,quotation_remarks:e.quotation_remarks||"",line_items:e.line_items||[]}}));h(n)})).catch((function(e){console.log(e)}))}),[t]),(0,i.useEffect)((function(){E.Z.post("/api/tc/get-quotations",(0,v.Z)({page_index:1,page_size:15,statuses:[],search:t||"",customer_id:s||null,job_site_id:a||null,status:r||null},"customer_id",Z)).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){return{key:t,id:e.id,customer_id:e.tc_customer_id,jobsite_id:e.tc_customer_job_site_id,customerName:e.customer_name,jobsite:e.job_site_name,inquiryDate:e.inquiry_date?B()(e.inquiry_date).format("DD-MM-YYYY HH:mm A"):"-",quotationDate:B()(e.task_period_from_date).format("DD-MM-YYYY"),amount:e.total,status:e.status||"Quote Sent",tc_customer_id:e.tc_customer_id,task_period_from_date:B()(e.task_period_from_date),task_period_to_date:B()(e.task_period_to_date),due_date:B()(e.due_date),sub_total:e.sub_total||0,tax:e.gst||8,discount:e.discount||0,total:e.total,tc_quotation_file:e.tc_quotation_file,quotation_remarks:e.quotation_remarks||"",line_items:e.line_items||[]}}));h(n)})).catch((function(e){console.log(e)}))}),[n]),(0,i.useEffect)((function(){(0,E.Z)({method:"post",url:"/api/tc/get-customer-job-sites",data:{page_index:1,page_size:1e5,search:"",customer_id:null}}).then((function(e){console.log(e.data.data.data),e.data.success&&f(e.data.data.data)})).catch((function(e){console.log(e)}))}),[]),(0,p.jsxs)("div",{children:[(0,p.jsx)(q.Z,{columns:ue,dataSource:x,scroll:{x:1100}}),(0,p.jsxs)(l.Z,{visible:te,centered:!0,maskClosable:!0,onCancel:function(){ne(!1)},title:"Quotation Status",footer:[(0,p.jsx)(c.Z,{style:{color:"#F5F5F5"},type:"primary",className:"font-weight-bold",onClick:function(){console.log(I),E.Z.post("/api/tc/update-quotation",(0,g.Z)((0,g.Z)({},I),{},{id:I.id,tc_customer_id:I.customer_id,status:ae})).then((function(e){var t=e.data;console.log(t),ne(!1),xe()})).catch((function(e){console.log(e)}))},children:"Save"},"submit"),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){oe(""),de(""),ne(!1)},className:"font-weight-bold",children:"Cancel"},"cancel")],children:[(0,p.jsx)("div",{children:(0,p.jsxs)(A.ZP.Group,{size:"small",onChange:function(e){return oe(e.target.value)},defaultValue:"Accepted",children:[(0,p.jsx)(A.ZP,{value:"Accepted",defaultChecked:!0,children:" Accepted "}),(0,p.jsx)(A.ZP,{value:"Rejected",children:" Rejected"})]})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Remarks"}),(0,p.jsx)(L,{rows:4,onChange:function(e){return de(e.target.value)},value:re})]})]}),(0,p.jsxs)(l.Z,{visible:S,centered:!0,maskClosable:!0,width:900,onCancel:function(){C(!1)},title:"Create Contract",footer:[(0,p.jsx)(c.Z,{style:{color:"#F5F5F5"},type:"primary",className:"font-weight-bold",onClick:function(){console.log(I),E.Z.post("/api/tc/new-contract",{tc_quotation_id:I.quotation_id,tc_customer_id:I.customer_id,tc_customer_job_site_id:I.customer_job_site_id||null,start_date:B()(M),reminders:W,type:K,status:"Active"}).then((function(e){console.log(e),O(null),Q(null),X(null),U([]),C(!1),P.ZP.success("Contract created successfully"),me()})).catch((function(e){console.log(e),C(!1),P.ZP.error("Contract cannot be created, please try again later")}))},children:"Save"}),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){C(!1)},className:"font-weight-bold",children:"Cancel"})],children:[(0,p.jsxs)("div",{className:"w-50",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Date Of Commencement of Work"}),(0,p.jsx)(y.Z,{value:M,onChange:function(e){O(e)}})]}),(0,p.jsxs)("div",{className:"w-50",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Contract Type"}),(0,p.jsxs)(d.Z,{className:"w-100",showSearch:!0,placeholder:"Contract Type",value:K,onChange:function(e){X(e)},children:[(0,p.jsx)(d.Z.Option,{title:"None",value:"None",children:"None"},0),(0,p.jsx)(d.Z.Option,{title:"Ad Hoc",value:"Ad Hoc",children:"Ad Hoc"},1),(0,p.jsx)(d.Z.Option,{title:"Routine",value:"Routine",children:"Routine"},2)]})]})]})]})},Q=n(98472),V=function(){(0,s.$B)();var e=(0,i.useState)(!1),t=(0,o.Z)(e,2),n=(t[0],t[1]),a=(0,i.useState)(!1),j=(0,o.Z)(a,2),f=j[0],v=j[1],g=(0,i.useState)(!1),Z=(0,o.Z)(g,2),b=Z[0],y=Z[1],N=(0,i.useState)(!1),S=(0,o.Z)(N,2),C=S[0],w=S[1],k=(0,i.useState)(!1),I=(0,o.Z)(k,2),D=I[0],Y=I[1],P=(0,i.useState)(""),q=(0,o.Z)(P,2),A=q[0],F=q[1],M=localStorage.getItem("customer_id"),O=(0,i.useState)(!1),T=(0,o.Z)(O,2),R=T[0],L=T[1],V=(0,i.useState)(!1),H=(0,o.Z)(V,2),W=H[0],U=H[1],z=(0,i.useState)(!1),G=(0,o.Z)(z,2),K=G[0],X=G[1],$=(0,i.useState)([]),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],ie=function(){n((function(e){return!e}))};l.Z;return(0,i.useEffect)((function(){E.Z.post("/api/tc/get-quotations",{page_index:1,page_size:1e5,search:null,customer_id:M}).then((function(e){var t=e.data.data.data.map((function(e,t){return{sr_no:t+1,key:e.id,id:e.id,jobsite_id:e.tc_customer_job_site_id,customer_id:e.tc_customer_id,customerName:e.customer_name,jobsite:e.jobsite_name||"",inquiryDate:e.inquiry_date?B()(e.inquiry_date).format("DD-MM-YYYY HH:mm A"):"-",quotationDate:B()(e.task_period_from_date).format("DD-MM-YYYY"),amount:e.total,status:e.status||"Quote Sent"}}));ne(t.reverse())})).catch((function(e){console.log(e)})),(0,E.Z)({method:"post",url:"/api/tc/get-customers",data:{page_index:1,page_size:1e5,customer_id:null,search:null}}).then((function(e){e.data.success&&U(e.data.data.data),console.log("Customers data fetched"),console.log(e.data.data.data)})).catch((function(e){console.log(e)})),(0,E.Z)({method:"post",url:"/api/tc/get-customer-job-sites",data:{page_index:1,page_size:1e5,customer_id:null,search:null}}).then((function(e){e.data.success&&L(e.data.data.data),console.log("Job sites data fetched"),console.log(e.data.data.data)})).catch((function(e){console.log(e)}))}),[]),(0,p.jsxs)(i.Fragment,{children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)(m.Z,{title:"Quotations"}),(0,p.jsx)("div",{className:"d-flex justify-content-between mb-3",children:(0,p.jsxs)("div",{className:" d-flex align-items-center justify-content-between mr-2",children:[(0,p.jsx)(x.Z,{setSearchText:F}),(0,p.jsxs)(c.Z,{className:"d-flex align-items-center ml-2",onClick:function(){X((function(e){return console.log("Drawer "+(e?"Closed":"Open")),!e}))},children:[(0,p.jsx)(u.Z,{className:"mr-2",component:h.k1}),"Filters"]}),(0,p.jsx)(Q.CSVLink,{data:te,headers:[{label:"Sr. No",key:"sr_no"},{label:"Quotation ID",key:"id"},{label:"Customer Name",key:"customerName"},{label:"Jobsite",key:"jobsite"},{label:"Inquiry Date",key:"inquiryDate"},{label:"Quotation Date",key:"quotationDate"},{label:"Amount",key:"amount"},{label:"Status",key:"status"}],filename:"All-Quotations.csv",children:(0,p.jsxs)(c.Z,{className:"d-flex align-items-center ml-2",children:[(0,p.jsx)("img",{className:"mr-2",src:_.Z,alt:"exportIcon"}),"Export"]})})]})})]}),(0,p.jsx)("div",{children:(0,p.jsx)(J,{searchText:A,selectedCustomerFilter:f,selectedJobsiteFilter:b,selectedStatusFilter:C,selectedFilter:D})}),(0,p.jsx)("div",{children:(0,p.jsxs)(r.Z,{title:"Filter",placement:"right",onClose:function(){console.log("Closed"),X(!1)},open:K,closable:!0,visible:K,footer:[(0,p.jsx)(c.Z,{style:{color:"#F5F5F5"},type:"primary",className:"font-weight-bold mr-2",onClick:function(){Y((function(e){return!e})),X(!1)},children:"Apply"},"submit"),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){Y((function(e){return!e})),v(!1),y(!1),w(!1),X(!1)},className:"font-weight-bold",children:"Reset"},"cancel")],children:[(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("h4",{children:"Customer"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Jobsite",value:f,onChange:function(e){v(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),W&&W.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))]})]}),(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("h4",{children:"Jobsite"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Jobsite",value:b,onChange:function(e){y(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),R&&R.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:"Status"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Status",value:C,onChange:function(e){w(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),(0,p.jsx)(d.Z.Option,{title:"Quote Accepted",value:"Quote Accepted",children:"Quote Accepted"},"Quote Accepted"),(0,p.jsx)(d.Z.Option,{title:"Quote Rejected",value:"Quote Rejected",children:"Quote Rejected"},"Quote Rejected"),(0,p.jsx)(d.Z.Option,{title:"Quote Sent",value:"Quote Sent",children:"Quote Sent"},"Quote Sent"),(0,p.jsx)(d.Z.Option,{title:"Contract Generated",value:"Contract Generated",children:"Contract Generated"},"Contract Generated")]})]})]})})]})},H=n(73332),W=n(25008),U=n(66770),z=n.n(U),G=n(56444),K=n(66871),X=n(66106),$=n(30914),ee=n(67324),te=n(66776),ne=G.Z.Dragger,ie=(y.Z.RangePicker,b.Z.TextArea),se=(j.Z.Title,j.Z.Text,function(e){var t=e.form,n=e.customers,s=e.jobsData,a=e.setJobsData,r=e.setJobFile,u=e.jobFile,m=localStorage.getItem("customer_id"),x=[{title:"SR NO",dataIndex:"sr_no"},{title:"DESCRIPTION",dataIndex:"name"},{title:"PROVISIONAL QTY",dataIndex:"quantity"},{title:"UNIT PRICE",dataIndex:"price"},{title:"SUBTOTAL",dataIndex:"total"},{title:"Action",dataIndex:"",render:function(e,t){return(0,p.jsx)(c.Z,{type:"danger",className:"mt-2",onClick:function(){h(t)},children:"Remove"})}}],h=function(e){var t=s.filter((function(t){return t!=e}));a(t)},_=(0,i.useState)(""),j=(0,o.Z)(_,2),f=j[0],v=j[1],N=(0,i.useState)(""),S=(0,o.Z)(N,2),C=S[0],w=(S[1],(0,i.useState)(0)),k=(0,o.Z)(w,2),I=k[0],D=k[1],Y=(0,i.useState)({name:"",url:""}),A=(0,o.Z)(Y,2),F=A[0],M=A[1],O=(0,i.useState)([]),T=(0,o.Z)(O,2),R=T[0],B=T[1],L=localStorage.getItem("token"),J=(0,i.useState)({sr_no:0,id:0,description:"",provisionalQty:0,unitPrice:0}),Q=(0,o.Z)(J,2),V=(Q[0],Q[1],(0,i.useState)("")),U=(0,o.Z)(V,2),G=U[0],se=U[1],ae=(0,i.useState)(null),oe=(0,o.Z)(ae,2),le=oe[0],ce=oe[1],re=(0,i.useState)(null),de=(0,o.Z)(re,2),ue=de[0],me=de[1],xe=(0,i.useState)(!1),he=(0,o.Z)(xe,2),_e=he[0],je=he[1],fe=(0,i.useState)(!1),pe=(0,o.Z)(fe,2),ve=pe[0],ge=pe[1],Ze=function(){je(!1),ge(!1)},be=[],ye={name:"file",multiple:!1,action:"".concat(E.Z.defaults.baseURL,"/api/tc/upload-document"),headers:{Authorization:"Bearer ".concat(L)},onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?(P.ZP.success("".concat(e.file.name," file uploaded successfully.")),M({name:e.file.name,url:e.file.response.url}),console.log(be)):"error"===t&&P.ZP.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files),M({name:"",url:""})}},Ne=function(e){t.getFieldValue("customer_id")&&(0,E.Z)({method:"post",url:"/api/tc/get-customer-job-sites",headers:{Authorization:"Bearer ".concat(L)},data:{customer_id:m,page_index:1,page_size:1e5,search:""}}).then((function(e){console.log(e.data),e.data.success&&B(e.data.data.data)})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){Ne()}),[]),(0,i.useEffect)((function(){t.setFieldsValue({customer_id:+m})}),[n]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(K.Z,{className:"mt-3",children:[(0,p.jsx)(X.Z,{align:"top",children:(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(H.Z.Item,{name:"customer_id",label:"Customer Name",rules:[{required:!0,message:"Please select Customer!"}],children:(0,p.jsx)(d.Z,{onChange:Ne,disabled:!0,children:n.map((function(e,t){return(0,p.jsx)(d.Z.Option,{value:e.id,children:e.company},t)}))})})})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between heading-container my-4",children:[(0,p.jsx)("div",{className:"heading",children:"Job Details"}),(0,p.jsxs)("div",{className:"heading d-flex justify-content-between align-items-center",children:[u&&(0,p.jsx)("div",{className:"mr-3",style:{color:"blue"},children:u.name}),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){je(!0)},className:"font-weight-bold",children:"Upload Pdf"})]})]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)(q.Z,{columns:x,dataSource:s}),(0,p.jsx)("div",{className:"d-flex justify-content-end",children:(0,p.jsx)(c.Z,{type:"primary",onClick:function(){ge(!0)},className:"mt-2",children:"Add Job"})})]}),(0,p.jsxs)(X.Z,{gutter:20,children:[(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(H.Z.Item,{label:"Quotation Date",name:"quotationDate",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(y.Z,{format:"DD-MM-YYYY"})})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(H.Z.Item,{label:"Validity (Days)",name:"validity",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(b.Z,{type:"number"})})})]}),(0,p.jsxs)(X.Z,{gutter:20,children:[(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(H.Z.Item,{label:"Payment Term",name:"paymentTerm",rules:[{required:!0,message:"Required"}],children:(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Payment Term",value:C,children:[(0,p.jsx)(d.Z.Option,{title:"Immediate",value:"Immediate",children:"Immediate"},0),(0,p.jsx)(d.Z.Option,{title:"15 Days",value:"15 Days",children:"15 Days"},15),(0,p.jsx)(d.Z.Option,{title:"30 Days",value:"30 Days",children:"30 Days"},30),(0,p.jsx)(d.Z.Option,{title:"45 Days",value:"45 Days",children:"45 Days"},45),(0,p.jsx)(d.Z.Option,{title:"60 Days",value:"60 Days",children:"60 Days"},60)]})})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(H.Z.Item,{label:"Jobsite",name:"jobsite_id",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(d.Z,{showSearch:!0,placeholder:"Jobsite",optionFilterProp:"children",filterOption:function(e,t){var n,i;return null===(n=(null!==(i=null===t||void 0===t?void 0:t.title)&&void 0!==i?i:"").toString().toLowerCase())||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.toLowerCase())},filterSort:function(e,t){var n,i;return(null!==(n=null===e||void 0===e?void 0:e.label)&&void 0!==n?n:"").toString().toLowerCase().localeCompare((null!==(i=null===t||void 0===t?void 0:t.label)&&void 0!==i?i:"").toString().toLowerCase())},value:I,onChange:D,children:R.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))})})})]}),(0,p.jsx)(X.Z,{children:(0,p.jsx)($.Z,{span:24,children:(0,p.jsx)("div",{style:{margin:"0px 0px",width:"100%"},children:(0,p.jsx)(H.Z.Item,{label:"Description",name:"remarks",rules:[{required:!0,message:"Description is Required"}],children:(0,p.jsx)(z(),{style:{borderRadius:"12px",paddingBottom:"5%"},theme:"snow",value:f,onChange:v,formats:W.bd,modules:W.qz})})})})})]}),(0,p.jsx)(l.Z,{visible:_e,centered:!0,maskClosable:!0,onCancel:Ze,title:"Upload Pdf",footer:[(0,p.jsx)(c.Z,{type:"primary",className:"font-weight-bold",onClick:function(){r(F),je(!1)},children:"Save"}),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){je(!1)},className:"font-weight-bold",children:"Cancel"})],children:(0,p.jsx)("div",{children:(0,p.jsxs)(ne,(0,g.Z)((0,g.Z)({},ye),{},{children:[(0,p.jsx)("p",{className:"ant-upload-drag-icon",children:(0,p.jsx)(te.Z,{})}),(0,p.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,p.jsx)("p",{className:"ant-upload-hint",children:"Files supported:pdf only"})]}))})}),(0,p.jsxs)(l.Z,{visible:ve,centered:!0,maskClosable:!0,onCancel:Ze,title:"Job Details",footer:[(0,p.jsx)(c.Z,{type:"primary",className:"font-weight-bold",onClick:function(){G||P.ZP.error("Please fill Description"),le||P.ZP.error("Please fill Provisional Quantity"),ue||P.ZP.error("Please fill Unit Price"),a([].concat((0,Z.Z)(s),[{sr_no:s.length+1,name:G,quantity:le,price:ue,total:+le*+ue||0}])),se(""),ce(0),me(0),ge(!1)},children:"Save"}),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){ge(!1)},className:"font-weight-bold",children:"Cancel"})],children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2",children:"Description"}),(0,p.jsx)(ie,{rows:4,onChange:function(e){se(e.target.value)},value:G})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2 mt-2",children:"Provisional Quantity"}),(0,p.jsx)(ee.Z,{min:0,onChange:function(e){ce(e)},value:le})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2 mt-2",children:"Unit Price"}),(0,p.jsx)(ee.Z,{min:0,onChange:function(e){me(e)},value:ue})]})]})]})}),ae=n(22778),oe=function(e){return(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)(u.Z,{component:h.zD}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{children:"New Quotation Created"}),(0,p.jsx)("p",{children:"Quotation is created successfully."})]})]})},le=function(e){var t=H.Z.useForm(),n=(0,o.Z)(t,1)[0],a=((0,s.UO)().inquiry_id,(0,i.useState)([])),l=(0,o.Z)(a,2),r=l[0],d=l[1],u=(0,i.useState)({name:"",url:""}),x=(0,o.Z)(u,2),h=x[0],_=x[1],j=(0,i.useState)([]),f=(0,o.Z)(j,2),v=f[0],g=f[1],Z=(0,i.useState)([]),b=(0,o.Z)(Z,2),y=b[0],N=b[1],S=(0,s.k6)(),C=localStorage.getItem("customer_id"),w=(0,i.useState)(!1),k=(0,o.Z)(w,2),I=k[0],D=k[1],Y=(0,p.jsx)(ae.Z,{onClose:function(){D((function(e){return!e}))},children:(0,p.jsx)(oe,{})}),q=function(){var e=0;if(r.length>0)for(var t=0;t<r.length;t++)e+=r[t].total;return e},A=function(e){var t=0;if(r.length>0)for(var n=0;n<r.length;n++)t+=r[n].total;return t&&(t+=+e/100*t),t};(0,i.useEffect)((function(){E.Z.post("/api/tc/get-customers",{page_index:1,page_size:1e5,searchText:null}).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){return{key:t,id:e.id,company:e.name,phoneNumber:e.phone,emailId:e.email}}));N(y.concat(n)),console.log(y)})).catch((function(e){console.log(e)})),(0,E.Z)({method:"post",url:"/api/tc/get-all-gsts",data:{}}).then((function(e){if(e.data.success){console.log(e.data.data);var t=e.data.data.data.map((function(e,t){return{key:e.id,id:e.id,srNo:t+1,percentage:e.percentage,description:e.description,created_at:B()(e.created_at).format("DD-MM-YYYY"),updated_at:B()(e.updated_at).format("DD-MM-YYYY")}}));g(t)}})).catch((function(e){console.log(e)}))}),[]);return(0,p.jsxs)(i.Fragment,{children:[I&&Y,(0,p.jsx)(m.Z,{title:"Create New Quotation"}),(0,p.jsxs)(H.Z,{form:n,labelCol:{span:10},wrapperCol:{span:18},layout:"vertical",onFinish:function(t){console.log(t),console.log(t.status),h&&h.url?e.id?E.Z.post("/api/tc/update-quotation",{id:e.id,tc_customer_id:C,tc_customer_job_site_id:t.jobsite_id,task_period_from_date:B()(t.quotationDate),task_period_to_date:B()(t.quotationDate).add(+t.validity,"days"),due_date:B()(t.quotationDate).add(+t.validity,"days"),sub_total:q(),status:t.status||"Pending",tax:v[v.length-1].percentage||8,discount:t.discount||0,total:A(v[v.length-1].percentage||8),payment_term:t.paymentTerm,validity:+t.validity,tc_quotation_file:h.url,quotation_remarks:t.remarks||"",line_items:r},{headers:{"content-type":"application/json"}}).then((function(t){t.data.success?(console.log(e.id),P.ZP.success("Quotation created successfully"),S.goBack()):P.ZP.warn(t.data.msg)})).catch((function(e){console.log(e)})):E.Z.post("/api/tc/new-quotation",{tc_customer_id:C,tc_customer_job_site_id:t.jobsite_id,task_period_from_date:B()(t.quotationDate),task_period_to_date:B()(t.quotationDate).add(+t.validity,"days"),due_date:B()(t.quotationDate).add(+t.validity,"days"),sub_total:q(),status:t.status||"Pending",tax:v[v.length-1].percentage||8,discount:t.discount||0,total:A(v[v.length-1].percentage||8),payment_term:t.paymentTerm,validity:+t.validity,tc_quotation_file:h.url,quotation_remarks:t.remarks||"",line_items:r},{headers:{"content-type":"application/json"}}).then((function(e){e.data.success?(P.ZP.success("Quotation created successfully"),S.goBack()):P.ZP.warn(e.data.msg)})).catch((function(e){console.log(e)})):P.ZP.error("Please Upload attachment file first")},children:[(0,p.jsx)(se,{form:n,customers:y,jobsData:r,setJobsData:d,jobFile:h,setJobFile:_}),(0,p.jsx)("div",{className:"w-100 d-flex justify-content-end actions",children:(0,p.jsxs)(H.Z.Item,{className:"w-100",children:[(0,p.jsx)(c.Z,{onClick:function(){S.goBack()},children:"Back"}),(0,p.jsx)(c.Z,{onClick:function(){n.resetFields(),d([]),_({name:"",url:""})},children:"Clear All"}),(0,p.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Save"})]})})]})]})},ce=n(2126),re=n(91333),de=n(47528),ue=n(92995),me=n(18538),xe=n(89536),he=n(73255),_e="SendQuotation_card__ydVsv",je="SendQuotation_add_details__MOm6x",fe="SendQuotation_total_amt__MP87i",pe="SendQuotation_tag__-Z0bU",ve="SendQuotation_action__9tpkO",ge=function(e){return(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)(u.Z,{component:h.zD}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{children:"New Quotation Created Successfully."}),(0,p.jsx)("p",{children:"Quotation Id HCI1234-QTN for items & services created successfully."})]})]})},Ze=j.Z.Title,be=j.Z.Text,ye=[{title:"XYZ Hand Bag",image:me},{title:"Sneakers",image:xe}],Ne=["Leather Replacement","Shoe Shine & Polish"],Se=[1,1],Ce=["S$100.00","S$100.00"],we=["S$100.00","S$100.00"],ke=[{text:"Subtotal",amt:"S$100.00"},{text:"Discount",amt:"S$100.00",tag:{text:"10%",color:"#0099A8"}},{text:"Tax",amt:"S$100.00",tag:{text:"10%",color:"#E82E2E"}}],Ie=function(){var e=(0,i.useState)(!1),t=(0,o.Z)(e,2),n=t[0],s=t[1];return(0,p.jsxs)(i.Fragment,{children:[n&&(0,p.jsx)(ae.Z,{onClose:function(){s((function(e){return!e}))},children:(0,p.jsx)(ge,{})}),(0,p.jsx)(m.Z,{svg:h.RP,title:"Quotations / View Quotation"}),(0,p.jsxs)(K.Z,{children:[(0,p.jsx)(K.Z,{className:_e,children:(0,p.jsxs)("div",{className:"mt-2 mb-2 w-100",children:[(0,p.jsx)("img",{src:ue,alt:"logo",style:{width:"20%"}}),(0,p.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(Ze,{strong:!0,level:3,children:"GRAND ENERGY TECHNOLOGIES PTE LTD"}),(0,p.jsxs)(be,{children:[(0,p.jsx)("b",{children:"Email:"})," admin@getpl.com.sg"]})]}),(0,p.jsx)("div",{})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)(be,{children:[(0,p.jsx)("b",{children:"Phone:"})," 6025 3659"]}),(0,p.jsx)("br",{}),(0,p.jsxs)(be,{children:[(0,p.jsx)("b",{children:"UEN/GST No:"})," 201802457D"]})]}),(0,p.jsxs)("div",{className:"text-right",children:[(0,p.jsx)(be,{children:"Bik 130 Jurong Gateway Road "}),(0,p.jsx)("br",{}),(0,p.jsx)(be,{children:"#03-203 Singapore 600130 "})]})]})]})}),(0,p.jsxs)(K.Z,{className:je,children:[(0,p.jsx)("div",{children:(0,p.jsx)("h5",{children:"Billed To:"})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{className:"mr-5",children:[(0,p.jsx)("br",{}),(0,p.jsx)(be,{strong:!0,children:"John Smith"}),(0,p.jsx)("br",{}),(0,p.jsx)(be,{children:"1111 ABC Road,XYZ Tower"}),(0,p.jsx)("br",{}),(0,p.jsx)(be,{children:"Singapore, 0023"}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(be,{children:"admin@customer.com"}),(0,p.jsx)("br",{}),(0,p.jsxs)(be,{children:[(0,p.jsx)("b",{children:"Phone:"})," 11111111"]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{className:"mr-4",children:[(0,p.jsx)("br",{}),(0,p.jsx)(be,{strong:!0,children:"Quotation No"}),(0,p.jsx)("br",{}),(0,p.jsx)(be,{children:"1111"}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(be,{strong:!0,children:"Quotation Date"}),(0,p.jsx)("br",{}),(0,p.jsx)(be,{children:"24 Dec, 2024"}),(0,p.jsx)("br",{})]}),(0,p.jsxs)("div",{className:"text-right",children:[(0,p.jsx)("br",{}),(0,p.jsx)(be,{strong:!0,children:"Payment Term"}),(0,p.jsx)("br",{}),(0,p.jsx)(be,{children:"COD"}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(be,{strong:!0,children:"Validity"}),(0,p.jsx)("br",{}),(0,p.jsx)(be,{children:"7 Days"}),(0,p.jsx)("br",{})]})]})]})]}),(0,p.jsx)("div",{children:(0,p.jsxs)(X.Z,{children:[(0,p.jsxs)($.Z,{span:3,children:[(0,p.jsx)(Ze,{level:4,children:"Sr. No."}),(0,p.jsx)(ce.ZP,{dataSource:ye,renderItem:function(e,t){return(0,p.jsx)(ce.ZP.Item,{className:" pl-0 border-0",children:t+1},e.title)}})]}),(0,p.jsx)($.Z,{span:21,children:(0,p.jsxs)(X.Z,{children:[(0,p.jsxs)($.Z,{span:8,children:[(0,p.jsx)(Ze,{level:4,children:"Description"}),(0,p.jsx)(ce.ZP,{dataSource:Ne,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e})},e)}})]}),(0,p.jsxs)($.Z,{span:4,children:[(0,p.jsx)(Ze,{level:4,children:"Provisional Quantity"}),(0,p.jsx)(ce.ZP,{dataSource:Se,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e})},e)}})]}),(0,p.jsxs)($.Z,{span:6,children:[(0,p.jsx)(Ze,{level:4,children:"Unit Price"}),(0,p.jsx)(ce.ZP,{dataSource:Ce,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e})},e)}})]}),(0,p.jsxs)($.Z,{span:6,children:[(0,p.jsx)(Ze,{level:4,children:"TOTAL"}),(0,p.jsx)(ce.ZP,{dataSource:we,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e})},e)}})]})]})})]})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)("div",{className:"d-flex justify-content-end",children:(0,p.jsxs)(X.Z,{style:{width:"40%"},className:"d-flex justify-content-center",children:[(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:ke,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center ",children:[(0,p.jsx)(be,{strong:!0,children:e.text}),e.tag&&(0,p.jsx)("div",{className:fe,children:(0,p.jsx)(de.Z,{color:e.tag.color,className:"h-100 w-100 ".concat(pe),children:e.tag.text})})]})},e.text)}})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:ke,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsx)("div",{className:"d-flex align-items-center",children:e.amt})},e.amt)}})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)(Ze,{strong:!0,level:2,children:"Grand Total: S$100.00"})]})})]}),(0,p.jsx)("div",{className:"d-flex justify-content-end ".concat(ve),children:(0,p.jsxs)(c.Z,{children:[(0,p.jsx)(u.Z,{component:he.p5}),"Download PDF"]})})]})},De=(G.Z.Dragger,j.Z.Title,j.Z.Title),Ye=(j.Z.Text,b.Z.TextArea),Pe=function(e){var t=e.invoice_id;return(0,p.jsxs)(K.Z,{className:"mt-3",children:[(0,p.jsx)(De,{strong:!0,level:3,children:"Payment Details"}),(0,p.jsx)("br",{}),(0,p.jsxs)(X.Z,{gutter:20,children:[(0,p.jsxs)($.Z,{span:12,children:[(0,p.jsx)(H.Z.Item,{label:"Invoice Id",name:"invoice_id",children:(0,p.jsx)(b.Z,{value:t,disabled:!0})}),(0,p.jsx)(H.Z.Item,{label:"Payment Method",name:"payment_method",children:(0,p.jsx)(b.Z,{})})]}),(0,p.jsxs)($.Z,{span:12,children:[(0,p.jsx)(H.Z.Item,{label:"Payment Date",name:"payment_date",rules:[{required:!0,message:"required"}],children:(0,p.jsx)(y.Z,{})}),(0,p.jsx)(H.Z.Item,{label:"Amount Collected",name:"amount",children:(0,p.jsx)(b.Z,{})})]})]}),(0,p.jsx)(H.Z.Item,{label:"Remarks",name:"remarks",children:(0,p.jsx)(Ye,{rows:4})})]})},qe=function(e){return(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)(u.Z,{component:h.zD}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{children:"Payment Recorded Successfully!"}),(0,p.jsx)("p",{children:"Payment of S$ 100.00 for Quotation Id HCI1234-QTN recorded successfully!"})]})]})},Ae="RecordPayments_save_btn__prxgj",Fe="RecordPayments_actions__1fTXW",Me=function(){var e=(0,s.k6)(),t=(0,s.UO)(),n=(0,i.useState)(!1),a=(0,o.Z)(n,2),l=a[0],r=a[1],d=(0,p.jsx)(ae.Z,{onClose:function(){r((function(e){return!e}))},children:(0,p.jsx)(qe,{})});return(0,p.jsxs)(i.Fragment,{children:[l&&d,(0,p.jsx)("div",{children:(0,p.jsx)(m.Z,{title:"Record Payments"})}),(0,p.jsx)(H.Z,{layout:"horizontal",onFinish:function(n){console.log(n),E.Z.post("/api/tc/new-payment",{invoice_id:t.invoice_id,amount:n.amount||0,payment_method:n.payment_method},{headers:{"content-type":"application/json"}}).then((function(t){t.data.success?(P.ZP.success("Payment Recorded successfully"),e.goBack()):P.ZP.warn(t.data.msg)})).catch((function(e){console.log(e)}))},children:(0,p.jsx)(X.Z,{gutter:20,children:(0,p.jsx)($.Z,{span:16,children:(0,p.jsx)(Pe,{invoice_id:t.invoice_id||0})})})}),(0,p.jsxs)("div",{className:"d-flex justify-content-end ".concat(Fe),children:[(0,p.jsx)(c.Z,{onClick:function(){return e.goBack()},children:"Back"}),(0,p.jsx)(c.Z,{type:"primary",className:Ae,children:"Save"})]})]})},Oe=(n(93114),function(){return(0,p.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,p.jsx)("g",{"clip-path":"url(#clip0_3143_14787)",children:(0,p.jsx)("path",{d:"M10.1667 5.66667C13.325 5.66667 16.1417 7.44167 17.5167 10.25C16.1417 13.0583 13.325 14.8333 10.1667 14.8333C7.00833 14.8333 4.19167 13.0583 2.81667 10.25C4.19167 7.44167 7.00833 5.66667 10.1667 5.66667ZM10.1667 4C6 4 2.44167 6.59167 1 10.25C2.44167 13.9083 6 16.5 10.1667 16.5C14.3333 16.5 17.8917 13.9083 19.3333 10.25C17.8917 6.59167 14.3333 4 10.1667 4ZM10.1667 8.16667C11.3167 8.16667 12.25 9.1 12.25 10.25C12.25 11.4 11.3167 12.3333 10.1667 12.3333C9.01667 12.3333 8.08333 11.4 8.08333 10.25C8.08333 9.1 9.01667 8.16667 10.1667 8.16667ZM10.1667 6.5C8.1 6.5 6.41667 8.18333 6.41667 10.25C6.41667 12.3167 8.1 14 10.1667 14C12.2333 14 13.9167 12.3167 13.9167 10.25C13.9167 8.18333 12.2333 6.5 10.1667 6.5Z",fill:"#455560"})}),(0,p.jsx)("defs",{children:(0,p.jsx)("clipPath",{id:"clip0_3143_14787",children:(0,p.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})}),Te=(n(11673),function(e){var t=e.contract_id,n=(e.setOpenContractModal,e.record,e.getData,e.setQuoteData,e.updateStatus,(0,s.k6)()),i=(0,s.$B)();return(0,p.jsx)(F.Z,{menu:(0,p.jsx)(f.Z,{children:(0,p.jsx)(f.Z.Item,{onClick:function(){n.push("".concat(i.path,"/view-contract-details/").concat(t))},children:(0,p.jsxs)("span",{className:"d-flex align-items-center",children:[(0,p.jsx)(u.Z,{className:"mr-2",component:Oe}),"View Contract Details"]})})})})}),Ee=(n(763),function(e){e.setPage;var t=e.searchText,n=(e.statuses,e.selectedFilter),a=e.selectedCustomerFilter,r=e.selectedJobsiteFilter,u=e.selectedTypeFilter,m=e.selectedStatusFilter,x=(0,i.useState)([]),h=(0,o.Z)(x,2),_=(h[0],h[1],(0,i.useState)([])),j=(0,o.Z)(_,2),f=j[0],N=j[1],S=(0,i.useState)(!1),C=(0,o.Z)(S,2),w=C[0],k=C[1],I=(0,i.useState)(null),D=(0,o.Z)(I,2),A=D[0],F=D[1],M=(0,i.useState)({}),O=(0,o.Z)(M,2),T=O[0],R=O[1],L=(0,i.useState)(null),J=(0,o.Z)(L,2),Q=J[0],V=J[1],H=(0,i.useState)(""),W=(0,o.Z)(H,2),U=W[0],z=W[1],G=(0,i.useState)(""),K=(0,o.Z)(G,2),X=K[0],$=K[1],te=(0,i.useState)(""),ne=(0,o.Z)(te,2),ie=ne[0],se=ne[1],ae=((0,s.TH)(),(0,i.useState)("")),oe=(0,o.Z)(ae,2),le=oe[0],ce=oe[1],re=(0,i.useState)(""),de=(0,o.Z)(re,2),ue=de[0],me=de[1],xe=(0,i.useState)(null),he=(0,o.Z)(xe,2),_e=he[0],je=he[1],fe=(0,i.useState)([]),pe=(0,o.Z)(fe,2),ve=pe[0],ge=pe[1],Ze=(0,i.useState)(!1),be=(0,o.Z)(Ze,2),ye=be[0],Ne=be[1],Se=(0,i.useState)(""),Ce=(0,o.Z)(Se,2),we=Ce[0],ke=Ce[1],Ie=(0,i.useState)(null),De=(0,o.Z)(Ie,2),Ye=De[0],Pe=De[1],qe=(0,i.useState)(null),Ae=(0,o.Z)(qe,2),Fe=Ae[0],Me=Ae[1],Oe=b.Z.TextArea,Ee=(0,i.useState)([]),Re=(0,o.Z)(Ee,2),Be=Re[0],Le=Re[1],Je=localStorage.getItem("customer_id"),Qe=[{title:"SR NO",dataIndex:"sr_no"},{title:"DESCRIPTION",dataIndex:"name"},{title:"QTY",dataIndex:"quantity"},{title:"UNIT PRICE",dataIndex:"price"},{title:"SUBTOTAL",dataIndex:"total"},{title:"Action",dataIndex:"",render:function(e,t){return(0,p.jsx)(c.Z,{type:"danger",className:"mt-2",onClick:function(){!function(e){var t=ve.filter((function(t){return t!=e}));ge(t)}(t)},children:"Remove"})}}],Ve=(0,i.useState)([]),He=(0,o.Z)(Ve,2),We=He[0],Ue=He[1],ze=[{title:"Contract Id",dataIndex:"id"},{title:"Customer Name",dataIndex:"customer_name"},{title:"Jobsite",dataIndex:"jobsite_name"},{title:"Contract Type",dataIndex:"contract_type"},{title:"Commence On",dataIndex:"commence_on"},{title:"Status",dataIndex:"status",render:function(e,t){var n={color:"#00AB6F",backgroundColor:"#EDFFF9",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"};if("Completed"===t.status)return(0,p.jsx)("span",{style:n,children:"Completed"});var i=B()(t.start_date,"YYYY-MM-DD").isBefore(B()().startOf("day"));return(0,p.jsx)("span",{style:n,children:i?"Ongoing":"Upcoming"})}},{title:"Action",dataIndex:"",key:"x",render:function(e,t){return(0,p.jsx)(Te,{updateStatus:$e,setQuoteData:R,contract_id:t.id,record:t,setOpenContractModal:k,getData:Ge})}}];(0,i.useEffect)((function(){E.Z.post("/api/tc/get-contracts",(0,v.Z)({page_index:1,page_size:10,statuses:null,search:t||null,customer_id:a||null,job_site_id:r||null,status:m||null,contract_type:u||null},"customer_id",Je)).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){var n;return(0,g.Z)((0,g.Z)({},e),{},(n={key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.job_site_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",e.status),(0,v.Z)(n,"start_date",e.start_date),n))}));N(n)})).catch((function(e){console.log(e)}))}),[t]),(0,i.useEffect)((function(){(0,E.Z)({method:"post",url:"/api/tc/get-users"}).then((function(e){console.log(e.data),e.data.success&&Le(e.data.data)})).catch((function(e){console.log(e)})),E.Z.post("/api/tc/get-contracts",(0,v.Z)({page_index:1,page_size:10,statuses:null,search:t||null,customer_id:a||null,job_site_id:r||null,status:m||null,contract_type:u||null},"customer_id",Je)).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){var n;return(0,g.Z)((0,g.Z)({},e),{},(n={key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.job_site_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",e.status),(0,v.Z)(n,"start_date",e.start_date),n))}));N(n)})).catch((function(e){console.log(e)}))}),[n]);var Ge=function(){E.Z.post("/api/tc/get-contracts",(0,v.Z)({page_index:1,page_size:10,statuses:null,search:t||null,customer_id:a||null,job_site_id:r||null,status:m||null,contract_type:u||null},"customer_id",Je)).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){var n;return(0,g.Z)((0,g.Z)({},e),{},(n={key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.job_site_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",e.status),(0,v.Z)(n,"start_date",e.start_date),n))}));N(n)})).catch((function(e){console.log(e)}))},Ke=[{title:"Sr. No.",dataIndex:"sr_no"},{title:"Date",dataIndex:"date",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(y.Z,{value:t.date,className:"w-100",onChange:function(e){var n=We;n[We.findIndex((function(e){return e===t}))].date=e,Ue((0,Z.Z)(n))}})})}},{title:"Time",dataIndex:"time",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(Y,{value:t.time,className:"w-100",format:"HH:mm A",use12Hours:!0,onChange:function(e){var n=We;n[We.findIndex((function(e){return e===t}))].time=e,Ue((0,Z.Z)(n))}})})}},{title:"Title",dataIndex:"title",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(b.Z,{value:t.title,className:"w-100",onChange:function(e){var n=We;n[We.findIndex((function(e){return e===t}))].title=e.target.value,Ue((0,Z.Z)(n))}})})}},{title:"Content",dataIndex:"description",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(b.Z,{value:t.description,className:"w-100",onChange:function(e){var n=We;n[We.findIndex((function(e){return e===t}))].description=e.target.value,Ue((0,Z.Z)(n))}})})}},{title:"Action",dataIndex:"",key:"x",render:function(e,t){return(0,p.jsx)(c.Z,{type:"danger",onClick:function(){!function(e){var t=We.filter((function(t){return t.sr_no!==e.sr_no}));Ue(t)}(t)},className:"font-weight-bold",children:"remove"})}}],Xe=function(){k(!1),Ne(!1),F(null),V(null),Ue([]),z(""),$(""),se(""),ce(""),me(""),je(""),ke(""),Pe(null),Me(null),ge([])},$e=function(e,t){(0,E.Z)({method:"post",url:"/api/tc/update-contract",data:{id:e.id,tc_customer_id:e.tc_customer_id,tc_customer_job_site_id:e.tc_customer_job_site_id,tc_quotation_id:e.tc_quotation_id,start_date:B()(e.start_date,"YYYY-MM-DD"),end_date:B()(e.end_date,"YYYY-MM-DD"),reminders:JSON.parse(e.reminders),type:e.type,status:t}}).then((function(e){e.data.success?(P.ZP.success("Contract Status Updated Successfully"),Ge()):P.ZP.error(e.data.msg)})).catch((function(e){console.log(e)}))};return(0,p.jsxs)("div",{children:[(0,p.jsx)(q.Z,{columns:ze,dataSource:f}),(0,p.jsxs)(l.Z,{visible:w,centered:!0,maskClosable:!0,width:900,onCancel:Xe,title:"Create Work Order",footer:[(0,p.jsx)(c.Z,{style:{color:"#F5F5F5"},type:"primary",className:"font-weight-bold",onClick:function(){var e;console.log(T),A&&Q&&U&&X&&ie&&le&&ue&&_e?0!==ve.length?E.Z.post("/api/tc/new-work-order",(e={tc_quotation_id:T.quotation_id,date:B()(),tc_contract_id:T.id,tc_customer_id:T.tc_customer_id,tc_customer_job_site_id:T.tc_customer_job_site_id||null},(0,v.Z)(e,"tc_quotation_id",T.tc_quotation_id),(0,v.Z)(e,"start_date",B()(A)),(0,v.Z)(e,"end_date",B()(Q)),(0,v.Z)(e,"reminders",We),(0,v.Z)(e,"direct_to_pc",U),(0,v.Z)(e,"co_regn_no",X),(0,v.Z)(e,"contract_number",ie),(0,v.Z)(e,"wbs_element",le),(0,v.Z)(e,"network_activity",ue),(0,v.Z)(e,"officer_in_charge",_e),(0,v.Z)(e,"line_items",ve),(0,v.Z)(e,"status","Active"),e)).then((function(e){console.log(e),F(null),V(null),Ue([]),k(!1),z(""),$(""),se(""),ce(""),me(""),je(""),P.ZP.success("Word Order created successfully")})).catch((function(e){console.log(e),k(!1),P.ZP.error("Work Order creation failed")})):P.ZP.error("Please add job details"):P.ZP.error("Please fill all the fields")},children:"Save"}),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){k(!1)},className:"font-weight-bold",children:"Cancel"})],children:[(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Date Of Commencement of Work"}),(0,p.jsx)(y.Z,{value:A,onChange:function(e){F(e)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Date of Expiration of Work"}),(0,p.jsx)(y.Z,{value:Q,onChange:function(e){V(e)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Direct to PC"}),(0,p.jsx)(b.Z,{value:U,onChange:function(e){return z(e.target.value)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"CO Regn No."}),(0,p.jsx)(b.Z,{value:X,onChange:function(e){return $(e.target.value)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Contract Number"}),(0,p.jsx)(b.Z,{value:ie,onChange:function(e){return se(e.target.value)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"WBS Element"}),(0,p.jsx)(b.Z,{value:le,onChange:function(e){return ce(e.target.value)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Network Activity"}),(0,p.jsx)(b.Z,{value:ue,onChange:function(e){return me(e.target.value)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Officer in Charge"}),(0,p.jsx)(d.Z,{showSearch:!0,style:{width:200},placeholder:"Officer in Charge",optionFilterProp:"children",filterOption:function(e,t){var n,i;return null===(n=(null!==(i=null===t||void 0===t?void 0:t.title)&&void 0!==i?i:"").toString().toLowerCase())||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.toLowerCase())},filterSort:function(e,t){var n,i;return(null!==(n=null===e||void 0===e?void 0:e.label)&&void 0!==n?n:"").toString().toLowerCase().localeCompare((null!==(i=null===t||void 0===t?void 0:t.label)&&void 0!==i?i:"").toString().toLowerCase())},value:_e,onChange:function(e){return je(e)},children:Be.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))})]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)(q.Z,{columns:Qe,dataSource:ve}),(0,p.jsx)("div",{className:"d-flex justify-content-end",children:(0,p.jsx)(c.Z,{type:"primary",onClick:function(){Ne(!0)},className:"mt-2",children:"Add Job"})})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Reminders"}),(0,p.jsx)(q.Z,{columns:Ke,dataSource:We}),(0,p.jsx)(c.Z,{type:"primary",className:"font-weight-bold mt-2",onClick:function(){Ue([].concat((0,Z.Z)(We),[{sr_no:We.length+1,date:null,title:"",description:""}]))},children:"Add Reminder"})]})]}),(0,p.jsxs)(l.Z,{visible:ye,centered:!0,maskClosable:!0,onCancel:Xe,title:"Job Details",footer:[(0,p.jsx)(c.Z,{type:"primary",className:"font-weight-bold",onClick:function(){we||P.ZP.error("Please fill Description"),Ye||P.ZP.error("Please fill Quantity"),Fe||P.ZP.error("Please fill Unit Price"),ge([].concat((0,Z.Z)(ve),[{sr_no:ve.length+1,name:we,quantity:Ye,price:Fe,total:+Ye*+Fe||0}])),ke(""),Pe(null),Me(null),Ne(!1)},children:"Save"}),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){ke(""),Pe(null),Me(null),Ne(!1)},className:"font-weight-bold",children:"Cancel"})],children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2",children:"Description"}),(0,p.jsx)(Oe,{rows:4,onChange:function(e){ke(e.target.value)},value:we})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2 mt-2",children:" Quantity"}),(0,p.jsx)(ee.Z,{min:0,onChange:function(e){Pe(e)},value:Ye})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2 mt-2",children:"Unit Price"}),(0,p.jsx)(ee.Z,{min:0,onChange:function(e){Me(e)},value:Fe})]})]})]})});var Re=function(){var e=(0,i.useState)(""),t=(0,o.Z)(e,2),n=t[0],s=t[1],a=(0,i.useState)(1),l=(0,o.Z)(a,2),j=(l[0],l[1]),g=(0,i.useState)([]),Z=(0,o.Z)(g,2),b=Z[0],y=(Z[1],(0,i.useState)([])),N=(0,o.Z)(y,2),S=N[0],C=N[1],w=(0,i.useState)(["All"]),k=(0,o.Z)(w,2),I=(k[0],k[1],(0,i.useState)(!1)),D=(0,o.Z)(I,2),Y=D[0],P=D[1],q=(0,i.useState)(!1),A=(0,o.Z)(q,2),F=A[0],M=A[1],O=(0,i.useState)(!1),T=(0,o.Z)(O,2),R=T[0],L=T[1],J=(0,i.useState)(!1),V=(0,o.Z)(J,2),H=V[0],W=V[1],U=(0,i.useState)(!1),z=(0,o.Z)(U,2),G=z[0],K=z[1],X=(0,i.useState)(!1),$=(0,o.Z)(X,2),ee=$[0],te=$[1],ne=(0,i.useState)(!1),ie=(0,o.Z)(ne,2),se=ie[0],ae=ie[1],oe=(0,i.useState)(!1),le=(0,o.Z)(oe,2),ce=le[0],re=le[1],de=(localStorage.getItem("token"),localStorage.getItem("customer_id"));(0,i.useEffect)((function(){E.Z.post("/api/tc/get-contracts",{page_index:1,page_size:1e5,search:null,customer_id:de}).then((function(e){var t=e.data.data.data.map((function(e,t){var n;return n={key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.job_site_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",ue(e)),n}));C(t)})).catch((function(e){console.log(e)})),(0,E.Z)({method:"post",url:"/api/tc/get-customers",data:{page_index:1,page_size:1e5,customer_id:null,search:null}}).then((function(e){e.data.success&&M(e.data.data.data),console.log("Customers data fetched"),console.log(e.data.data.data)})).catch((function(e){console.log(e)})),(0,E.Z)({method:"post",url:"/api/tc/get-customer-job-sites",data:{page_index:1,page_size:1e5,customer_id:null,search:null}}).then((function(e){e.data.success&&P(e.data.data.data),console.log("Job sites data fetched"),console.log(e.data.data.data)})).catch((function(e){console.log(e)}))}),[]);var ue=function(e){return"Completed"===e.status?"Completed":B()(e.start_date,"YYYY-MM-DD").isBefore(B()().startOf("day"))?"Ongoing":"Upcoming"};return f.Z,f.Z.Item,f.Z.SubMenu,f.Z.Item,f.Z.Item,f.Z.Item,(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)(m.Z,{title:"Contracts"}),(0,p.jsx)("div",{className:"d-flex justify-content-between mb-3",children:(0,p.jsxs)("div",{className:" d-flex align-items-center justify-content-between mr-2",children:[(0,p.jsx)(x.Z,{setSearchText:s}),(0,p.jsxs)(c.Z,{className:"d-flex align-items-center ml-2",onClick:function(){L((function(e){return!e}))},children:[(0,p.jsx)(u.Z,{className:"mr-2",component:h.k1}),"Filters"]}),(0,p.jsx)(Q.CSVLink,{data:S,headers:[{label:"Sr. No",key:"sr_no"},{label:"Contract ID",key:"id"},{label:"Customer Name",key:"customer_name"},{label:"Jobsite",key:"jobsite_name"},{label:"Contract Type",key:"contract_type"},{label:"Commence On",key:"commence_on"},{label:"Expired On",key:"expire_on"},{label:"Status",key:"status"}],filename:"All-Contracts.csv",children:(0,p.jsxs)(c.Z,{className:"d-flex align-items-center ml-2",children:[(0,p.jsx)("img",{className:"mr-2",src:_.Z,alt:"exportIcon"}),"Export"]})})]})})]}),(0,p.jsx)("div",{children:(0,p.jsx)(Ee,{setPage:j,searchText:n,statuses:b,selectedCustomerFilter:H,selectedJobsiteFilter:G,selectedStatusFilter:se,selectedFilter:ce,selectedTypeFilter:ee})}),(0,p.jsx)("div",{children:(0,p.jsxs)(r.Z,{title:"Filter",placement:"right",onClose:function(){console.log("Closed"),L(!1)},open:R,closable:!0,visible:R,footer:[(0,p.jsx)(c.Z,{style:{color:"#F5F5F5"},type:"primary",className:"font-weight-bold mr-2",onClick:function(){re((function(e){return!e})),L(!1)},children:"Apply"},"submit"),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){re((function(e){return!e})),W(!1),K(!1),te(!1),ae(!1),L(!1)},className:"font-weight-bold",children:"Reset"},"cancel")],children:[(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("h4",{children:"Customer"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Jobsite",value:H,onChange:function(e){W(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),F&&F.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))]})]}),(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("h4",{children:"Jobsite"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Jobsite",value:G,onChange:function(e){K(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),Y&&Y.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))]})]}),(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("h4",{children:"Contract Type"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Status",value:ee,onChange:function(e){te(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),(0,p.jsx)(d.Z.Option,{title:"Ad Hoc",value:"Ad Hoc",children:"Ad Hoc"},"Ad Hoc"),(0,p.jsx)(d.Z.Option,{title:"Routine",value:"Routine",children:"Routine"},"Routine")]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:"Status"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Status",value:se,onChange:function(e){ae(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),(0,p.jsx)(d.Z.Option,{title:"Active",value:"Active",children:"Active"},"Active"),(0,p.jsx)(d.Z.Option,{title:"Expired",value:"Expired",children:"Expired"},"Expired")]})]})]})})]})},Be=n(87661),Le=n(41667),Je="ViewContract_add_details__fLwes",Qe="ViewContract_total_amt__o9HNt",Ve="ViewContract_action__J9e5V";var He=function(e){var t=e.reminder,n=e.contractData,s=(0,i.useState)(t),a=(0,o.Z)(s,2),l=a[0],r=a[1],d=[{title:"Sr. No.",dataIndex:"sr_no"},{title:"Date",dataIndex:"date",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(y.Z,{value:t.date,className:"w-100",onChange:function(e){var n=l;n[l.findIndex((function(e){return e===t}))].date=e,r((0,Z.Z)(n))}})})}},{title:"Time",dataIndex:"time",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(Y,{value:t.time,className:"w-100",format:"HH:mm A",use12Hours:!0,onChange:function(e){var n=l;n[l.findIndex((function(e){return e===t}))].time=e,r((0,Z.Z)(n))}})})}},{title:"Title",dataIndex:"title",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(b.Z,{value:t.title,className:"w-100",onChange:function(e){var n=l;n[l.findIndex((function(e){return e===t}))].title=e.target.value,r((0,Z.Z)(n))}})})}},{title:"Content",dataIndex:"description",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(b.Z,{value:t.description,className:"w-100",onChange:function(e){var n=l;n[l.findIndex((function(e){return e===t}))].description=e.target.value,r((0,Z.Z)(n))}})})}},{title:"Action",dataIndex:"",key:"x",render:function(e,t){return(0,p.jsx)(c.Z,{type:"danger",onClick:function(){!function(e){var t=l.filter((function(t){return t.sr_no!==e.sr_no}));r(t)}(t)},className:"font-weight-bold",children:"remove"})}}],u=function(e){(0,E.Z)({method:"post",url:"/api/tc/update-work-order",data:{id:e.id,date:B()(e.date).format("YYYY-MM-DD"),direct_to_pc:e.direct_to_pc,co_regn_no:e.co_regn_no,contract_number:e.contract_number,wbs_element:e.wbs_element,network_activity:e.network_activity,officer_in_charge:e.officer_in_charge,tc_customer_id:e.tc_customer_id,tc_customer_job_site_id:e.tc_customer_job_site_id,tc_contract_id:e.tc_contract_id,tc_quotation_id:e.tc_quotation_id,start_date:B()(e.start_date).format("YYYY-MM-DD"),end_date:B()(e.end_date).format("YYYY-MM-DD"),reminders:l,status:e.status,line_items:JSON.parse(e.line_items)}}).then((function(e){e.data.success?P.ZP.success("Reminders Saved Successfully"):P.ZP.error(e.data.msg)})).catch((function(e){console.log(e)}))};return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Reminders"}),(0,p.jsx)(q.Z,{columns:d,dataSource:l}),(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",marginTop:"10px"},children:[(0,p.jsx)(c.Z,{type:"primary",className:"font-weight-bold mt-2",onClick:function(){r([].concat((0,Z.Z)(l),[{sr_no:l.length+1,date:null,title:"",description:""}]))},children:"Add Reminder"}),(0,p.jsx)(c.Z,{type:"primary",className:"font-weight-bold mt-2 ml-2",onClick:function(){for(var e=0;e<l.length;e++)if(null===l[e].date||null===l[e].time||""===l[e].title||""===l[e].description)return void P.ZP.error("Please fill all the fields");u(n)},children:"Save"})]})]})})},We=function(){return(0,p.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,p.jsx)("g",{"clip-path":"url(#clip0_3143_14787)",children:(0,p.jsx)("path",{d:"M10.1667 5.66667C13.325 5.66667 16.1417 7.44167 17.5167 10.25C16.1417 13.0583 13.325 14.8333 10.1667 14.8333C7.00833 14.8333 4.19167 13.0583 2.81667 10.25C4.19167 7.44167 7.00833 5.66667 10.1667 5.66667ZM10.1667 4C6 4 2.44167 6.59167 1 10.25C2.44167 13.9083 6 16.5 10.1667 16.5C14.3333 16.5 17.8917 13.9083 19.3333 10.25C17.8917 6.59167 14.3333 4 10.1667 4ZM10.1667 8.16667C11.3167 8.16667 12.25 9.1 12.25 10.25C12.25 11.4 11.3167 12.3333 10.1667 12.3333C9.01667 12.3333 8.08333 11.4 8.08333 10.25C8.08333 9.1 9.01667 8.16667 10.1667 8.16667ZM10.1667 6.5C8.1 6.5 6.41667 8.18333 6.41667 10.25C6.41667 12.3167 8.1 14 10.1667 14C12.2333 14 13.9167 12.3167 13.9167 10.25C13.9167 8.18333 12.2333 6.5 10.1667 6.5Z",fill:"#455560"})}),(0,p.jsx)("defs",{children:(0,p.jsx)("clipPath",{id:"clip0_3143_14787",children:(0,p.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})},Ue=function(e){var t=e.contract_id,n=(e.setOpenContractModal,e.record,e.getData,e.setQuoteData,(0,s.k6)());(0,s.$B)();return(0,p.jsx)(F.Z,{menu:(0,p.jsx)(f.Z,{children:(0,p.jsx)(f.Z.Item,{onClick:function(){n.push("/app/contract-management/work-orders/view-service/".concat(t))},children:(0,p.jsxs)("span",{className:"d-flex align-items-center",children:[(0,p.jsx)(u.Z,{className:"mr-2",component:We}),"View Work Entry Sheet"]})})})})},ze=function(e){e.setsetPage;var t=e.searchText,n=e.workOrderId,s=(e.statuses,e.selectedFilter),a=e.selectedCustomerFilter,l=e.id,c=e.selectedJobsiteFilter,r=e.selectedTypeFilter,d=e.selectedStatusFilter,u=(0,i.useState)([]),m=(0,o.Z)(u,2),x=(m[0],m[1],(0,i.useState)([])),h=(0,o.Z)(x,2),_=h[0],j=h[1],f=(0,i.useState)(!1),Z=(0,o.Z)(f,2),b=(Z[0],Z[1]),y=(0,i.useState)(null),N=(0,o.Z)(y,2),S=(N[0],N[1],(0,i.useState)({})),C=(0,o.Z)(S,2),w=(C[0],C[1]),k=(0,i.useState)(null),I=(0,o.Z)(k,2),D=(I[0],I[1],(0,i.useState)("")),Y=(0,o.Z)(D,2),P=(Y[0],Y[1],(0,i.useState)("")),A=(0,o.Z)(P,2),F=(A[0],A[1],(0,i.useState)("")),M=(0,o.Z)(F,2),O=(M[0],M[1],(0,i.useState)("")),T=(0,o.Z)(O,2),R=(T[0],T[1],(0,i.useState)("")),L=(0,o.Z)(R,2),J=(L[0],L[1],(0,i.useState)("")),Q=(0,o.Z)(J,2),V=(Q[0],Q[1],(0,i.useState)([])),H=(0,o.Z)(V,2),W=(H[0],H[1],[{title:" Id",dataIndex:"id"},{title:"Customer Name",dataIndex:"customer_name"},{title:"Jobsite",dataIndex:"job_site_name"},{title:"Target Completion Date",dataIndex:"target_completion_date",render:function(e,t){return(0,p.jsx)("span",{children:t.target_completion_date?B()(t.target_completion_date).format("DD-MM-YYYY"):"-"})}},{title:"Actual Completion Date",dataIndex:"actual_completion_date",render:function(e,t){return(0,p.jsx)("span",{children:t.actual_completion_date?B()(t.actual_completion_date).format("DD-MM-YYYY"):"-"})}},{title:"Status",dataIndex:"status",render:function(e,t){return(0,p.jsx)("span",{style:{color:"#00AB6F",backgroundColor:"#EDFFF9",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:t.status},t.status)}},{title:"Action",dataIndex:"",key:"x",render:function(e,t){return(0,p.jsx)(Ue,{setQuoteData:w,contract_id:t.id,record:t,setOpenContractModal:b,getData:U})}}]);(0,i.useEffect)((function(){E.Z.post("/api/tc/get-service_entry_sheets",(0,g.Z)((0,g.Z)((0,g.Z)({page_index:1,page_size:10},l&&{contract_id:+l}),n&&{work_order_id:+n}),{},{statuses:null,search:t||null,customer_id:a||null,job_site_id:c||null,status:d||null,contract_type:r||null})).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){var n;return(0,g.Z)((0,g.Z)({},e),{},(n={key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.jobsite_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",e.status),(0,v.Z)(n,"start_date",e.start_date),n))}));j(n)})).catch((function(e){console.log(e)}))}),[t]),(0,i.useEffect)((function(){E.Z.post("/api/tc/get-service_entry_sheets",(0,g.Z)((0,g.Z)((0,g.Z)({page_index:1,page_size:10},l&&{contract_id:+l}),n&&{work_order_id:+n}),{},{statuses:null,search:t||null,customer_id:a||null,job_site_id:c||null,status:d||null,contract_type:r||null})).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){var n;return(0,g.Z)((0,g.Z)({},e),{},(n={key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.jobsite_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",e.status),(0,v.Z)(n,"start_date",e.start_date),n))}));j(n)})).catch((function(e){console.log(e)}))}),[s]);var U=function(){E.Z.post("/api/tc/get-service_entry_sheets",(0,g.Z)((0,g.Z)((0,g.Z)({page_index:1,page_size:10,statuses:null},l&&{contract_id:+l}),n&&{work_order_id:+n}),{},{search:t||null,customer_id:a||null,job_site_id:c||null,status:d||null,contract_type:r||null})).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){var n;return(0,g.Z)((0,g.Z)({},e),{},(n={key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.jobsite_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",e.status),(0,v.Z)(n,"start_date",e.start_date),n))}));j(n)})).catch((function(e){console.log(e)}))};return(0,p.jsx)("div",{children:(0,p.jsx)(q.Z,{columns:W,dataSource:_})})};var Ge=function(e){var t=e.id,n=e.workOrderId,s=(0,i.useState)(""),a=(0,o.Z)(s,2),l=a[0],u=a[1],h=(0,i.useState)(1),j=(0,o.Z)(h,2),v=(j[0],j[1]),Z=(0,i.useState)([]),b=(0,o.Z)(Z,2),y=b[0],N=(b[1],(0,i.useState)([])),S=(0,o.Z)(N,2),C=S[0],w=S[1],k=(0,i.useState)(["All"]),I=(0,o.Z)(k,2),D=(I[0],I[1],(0,i.useState)(!1)),Y=(0,o.Z)(D,2),P=Y[0],q=Y[1],A=(0,i.useState)(!1),F=(0,o.Z)(A,2),M=F[0],O=F[1],T=(0,i.useState)(!1),R=(0,o.Z)(T,2),L=R[0],J=R[1],V=(0,i.useState)(!1),H=(0,o.Z)(V,2),W=H[0],U=H[1],z=(0,i.useState)(!1),G=(0,o.Z)(z,2),K=G[0],X=G[1],$=(0,i.useState)(!1),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],ie=(0,i.useState)(!1),se=(0,o.Z)(ie,2),ae=se[0],oe=se[1],le=(0,i.useState)(!1),ce=(0,o.Z)(le,2),re=ce[0],de=ce[1];return localStorage.getItem("token"),(0,i.useEffect)((function(){E.Z.post("/api/tc/get-service_entry_sheets",(0,g.Z)((0,g.Z)({page_index:1,page_size:1e5,search:null},t&&{contract_id:+t}),n&&{work_order_id:+n})).then((function(e){var t=e.data.data.data.map((function(e,t){return{sr_no:t+1,key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.job_site_name||e.tc_customer_job_site_id||"-",target_completion_date:e.target_completion_date?B()(new Date(e.target_completion_date)).format("DD-MM-YYYY"):"",actual_completion_date:e.actual_completion_date?B()(new Date(e.actual_completion_date)).format("DD-MM-YYYY"):"",status:e.status}}));w(t)})).catch((function(e){console.log(e)})),(0,E.Z)({method:"post",url:"/api/tc/get-customers",data:{page_index:1,page_size:1e5,customer_id:null,search:null}}).then((function(e){e.data.success&&O(e.data.data.data),console.log("Customers data fetched"),console.log(e.data.data.data)})).catch((function(e){console.log(e)})),(0,E.Z)({method:"post",url:"/api/tc/get-customer-job-sites",data:{page_index:1,page_size:1e5,customer_id:null,search:null}}).then((function(e){e.data.success&&q(e.data.data.data),console.log("Job sites data fetched"),console.log(e.data.data.data)})).catch((function(e){console.log(e)}))}),[]),f.Z,f.Z.Item,f.Z.SubMenu,f.Z.Item,f.Z.Item,f.Z.Item,(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)(m.Z,{title:"Service Entry Sheets"}),(0,p.jsx)("div",{className:"d-flex justify-content-between mb-3",children:(0,p.jsxs)("div",{className:" d-flex align-items-center justify-content-between mr-2",children:[(0,p.jsx)(x.Z,{setSearchText:u}),(0,p.jsx)(Q.CSVLink,{data:C,headers:[{label:"Sr. No",key:"sr_no"},{label:"ID",key:"id"},{label:"Customer Name",key:"customer_name"},{label:"Jobsite",key:"jobsite_name"},{label:"Target Completion Date",key:"target_completion_date"},{label:"Actual Completion Date",key:"actual_completion_date"},{label:"Status",key:"status"}],filename:"All-Service-Entries.csv",children:(0,p.jsxs)(c.Z,{className:"d-flex align-items-center ml-2",children:[(0,p.jsx)("img",{className:"mr-2",src:_.Z,alt:"exportIcon"}),"Export"]})})]})})]}),(0,p.jsx)("div",{children:(0,p.jsx)(ze,{workOrderId:n,setsetPage:v,searchText:l,statuses:y,selectedCustomerFilter:W,selectedJobsiteFilter:K,selectedStatusFilter:ae,selectedFilter:re,selectedTypeFilter:te,id:t})}),(0,p.jsx)("div",{children:(0,p.jsxs)(r.Z,{title:"Filter",placement:"right",onClose:function(){console.log("Closed"),J(!1)},open:L,closable:!0,visible:L,footer:[(0,p.jsx)(c.Z,{style:{color:"#F5F5F5"},type:"primary",className:"font-weight-bold mr-2",onClick:function(){de((function(e){return!e})),J(!1)},children:"Apply"},"submit"),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){de((function(e){return!e})),U(!1),X(!1),ne(!1),oe(!1),J(!1)},className:"font-weight-bold",children:"Reset"},"cancel")],children:[(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("h4",{children:"Customer"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Jobsite",value:W,onChange:function(e){U(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),M&&M.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))]})]}),(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("h4",{children:"Jobsite"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Jobsite",value:K,onChange:function(e){X(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),P&&P.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))]})]})]})})]})},Ke=j.Z.Title,Xe=j.Z.Text,$e={page:{margin:Le.Zt.SMALL}},et=function(){var e=(0,i.useRef)(),t=(0,s.k6)(),n=(0,s.UO)(),a=(0,i.useState)([]),l=(0,o.Z)(a,2),r=l[0],d=l[1],x=(0,i.useState)({customerId:0,email:"",name:"",phone:"",status:"",profile_pic:"",contact_name:"",office_contact_number:"",uen_number:"",postal_code:"",block_number:"",level_number:"",unit_number:"",street_number:"",country:"",created_by:"",other_details:{}}),_=(0,o.Z)(x,2),j=_[0],f=_[1],v=(0,i.useState)({id:0,customer_id:"",jobsite_id:"",customerName:"",jobsite:"",inquiryDate:"",quotationDate:"",amount:"",status:"",tc_customer_id:"",task_period_from_date:"",task_period_to_date:"",due_date:"",sub_total:0,tax:8,discount:0,total:0,tc_quotation_file:"",quotation_remarks:"",line_items:[]}),Z=(0,o.Z)(v,2),b=Z[0],y=Z[1],N=(0,i.useState)([]),S=(0,o.Z)(N,2),C=S[0],w=S[1],k=(0,i.useState)({}),I=(0,o.Z)(k,2),D=I[0],Y=I[1],P=(0,i.useState)({id:0,customer_id:"",jobsite_id:"",customerName:"",jobsite:"",start_date:"",end_date:""}),q=(0,o.Z)(P,2),A=q[0],F=q[1],M=(0,i.useState)([]),O=(0,o.Z)(M,2),T=(O[0],O[1],(0,i.useState)([])),R=(0,o.Z)(T,2),L=R[0],J=R[1],Q=(0,i.useState)([]),V=(0,o.Z)(Q,2),H=V[0],W=V[1],U=function(e){E.Z.post("/api/tc/get-quotation",{id:+e}).then((function(e){var t=e.data.data;y({id:null===t||void 0===t?void 0:t.id,customer_id:null===t||void 0===t?void 0:t.tc_customer_id,jobsite_id:null===t||void 0===t?void 0:t.tc_customer_job_site_id,customerName:null===t||void 0===t?void 0:t.customer_name,jobsite:null===t||void 0===t?void 0:t.jobsite_name,inquiryDate:null!==t&&void 0!==t&&t.inquiry_date?B()(null===t||void 0===t?void 0:t.inquiry_date).format("DD-MM-YYYY HH:mm A"):"",quotationDate:B()(null===t||void 0===t?void 0:t.task_period_from_date).format("DD-MM-YYYY"),amount:null===t||void 0===t?void 0:t.total,status:(null===t||void 0===t?void 0:t.status)||"Quote Sent",tc_customer_id:null===t||void 0===t?void 0:t.tc_customer_id,task_period_from_date:B()(null===t||void 0===t?void 0:t.task_period_from_date),task_period_to_date:B()(null===t||void 0===t?void 0:t.task_period_to_date),due_date:B()(null===t||void 0===t?void 0:t.due_date).format("DD-MM-YYYY"),sub_total:(null===t||void 0===t?void 0:t.sub_total)||0,tax:(null===t||void 0===t?void 0:t.gst)||8,discount:(null===t||void 0===t?void 0:t.discount)||0,total:null===t||void 0===t?void 0:t.total,tc_quotation_file:null===t||void 0===t?void 0:t.tc_quotation_file,quotation_remarks:(null===t||void 0===t?void 0:t.quotation_remarks)||"",line_items:(null===t||void 0===t?void 0:t.line_items)||[]}),console.log(b),t.tc_customer_id&&z(t.tc_customer_id)})).catch((function(e){console.log(e)}))},z=function(e){E.Z.post("/api/tc/get-customer",{id:e}).then((function(e){var t,n,i,s,a,o,l,c,r,d,u,m,x=e.data.data;if(x.other_details){var h=JSON.parse(x.other_details);x=(0,g.Z)((0,g.Z)({},x),h)}f({customerId:x.id,email:x.email,name:x.name,phone:x.phone,status:x.status,profile_pic:null===(t=x)||void 0===t?void 0:t.profile_pic,contact_name:null===(n=x)||void 0===n?void 0:n.contact_name,office_contact_number:null===(i=x)||void 0===i?void 0:i.office_contact_number,uen_number:null===(s=x)||void 0===s?void 0:s.uen_number,postal_code:(null===(a=x)||void 0===a?void 0:a.postal_code)||"000000",block_number:(null===(o=x)||void 0===o?void 0:o.block_number)||"",level_number:(null===(l=x)||void 0===l?void 0:l.level_number)||"",unit_number:(null===(c=x)||void 0===c?void 0:c.unit_number)||"",street_number:(null===(r=x)||void 0===r?void 0:r.street_number)||"",country:(null===(d=x)||void 0===d?void 0:d.country)||"Singapore",created_by:(null===(u=x)||void 0===u?void 0:u.created_by)||"",other_details:null===(m=x)||void 0===m?void 0:m.other_details}),console.log(j)})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){E.Z.post("/api/tc/get-work-order",{id:+n.id}).then((function(e){var t=e.data.data;Y(t),F({id:null===t||void 0===t?void 0:t.id,customer_id:null===t||void 0===t?void 0:t.tc_customer_id,jobsite_id:null===t||void 0===t?void 0:t.tc_customer_job_site_id,quotation_id:null===t||void 0===t?void 0:t.tc_quotation_id,customerName:null===t||void 0===t?void 0:t.customer_name,jobsite:null===t||void 0===t?void 0:t.job_site_name,start_date:null===t||void 0===t?void 0:t.start_date,end_date:null===t||void 0===t?void 0:t.end_date,direct_to_pc:null===t||void 0===t?void 0:t.direct_to_pc,co_regn_no:null===t||void 0===t?void 0:t.co_regn_no,contract_number:null===t||void 0===t?void 0:t.contract_number,wbs_element:null===t||void 0===t?void 0:t.wbs_element,network_activity:null===t||void 0===t?void 0:t.network_activity,officer_in_charge:null===t||void 0===t?void 0:t.officer_in_charge_name,created_at:B()(t.created_at).format("DD-MM-YYYY hh:mm A")}),d(null!==t&&void 0!==t&&t.reminders?JSON.parse(null===t||void 0===t?void 0:t.reminders).map((function(e){return{sr_no:e.sr_no,date:B()(e.date),time:B()(e.time),title:e.title,description:e.description}})):[]),w(null!==t&&void 0!==t&&t.line_items?JSON.parse(null===t||void 0===t?void 0:t.line_items):[]);var n=t.line_items?JSON.parse(null===t||void 0===t?void 0:t.line_items).reduce((function(e,t){return e+t.total}),0):0,i=.09*n||0,s=0;i&&(s=n+i),W([{text:"Subtotal",amt:"".concat(n||0)},{text:"GST",amt:"".concat(i.toFixed(2)||0),tag:{text:"9%",color:"#0099A8"}}]),J([{text:"Grand Total",amt:s.toFixed(2)}]),console.log(A),U(t.tc_quotation_id),t.tc_customer_id&&z(t.tc_customer_id)})).catch((function(e){console.log(e)}))}),[]),(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(m.Z,{svg:h.RP,title:"Contracts / View Work Order"}),(0,p.jsxs)(Be.Z,{children:[(0,p.jsx)(Be.Z.TabPane,{tab:"Work Order ",children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(K.Z,{className:"quotation-card",children:(0,p.jsxs)("div",{ref:e,children:[(0,p.jsx)(K.Z,{className:Je,children:(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(Xe,{strong:!0,children:j.name}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{children:"".concat(j.block_number," ").concat(j.street_number,", ").concat(j.level_number,", ").concat(j.unit_number)}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{children:"".concat(j.country,", ").concat(j.postal_code)}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Customer ID: "}),(0,p.jsx)(Xe,{children:j.customerId}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Tel Number: "}),(0,p.jsx)(Xe,{children:j.phone}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Jobsite: "}),(0,p.jsx)(Xe,{children:A.jobsite})]}),(0,p.jsxs)("div",{className:"text-left pr-4",children:[(0,p.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:"WORK ORDER"}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{className:"mr-3",children:[(0,p.jsx)(Xe,{strong:!0,children:"Work Order No: "}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Date Of Commencement: "}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Date Of Expire: "}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Direct To Pc"}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Co Regn No"}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Contract Number"}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Wbs Element"}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Network Activity"}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{strong:!0,children:"Officer In Charge"}),(0,p.jsx)("br",{})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)(Xe,{children:["#",A.id]}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{children:A.start_date}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{children:A.end_date}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{children:A.direct_to_pc}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{children:A.co_regn_no}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{children:A.contract_number}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{children:A.wbs_element}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{children:A.network_activity}),(0,p.jsx)("br",{}),(0,p.jsx)(Xe,{children:A.officer_in_charge})]})]})]})]})}),(0,p.jsx)("div",{children:(0,p.jsxs)(X.Z,{children:[(0,p.jsxs)($.Z,{span:3,children:[(0,p.jsx)(Ke,{level:4,children:"Sr. No."}),(0,p.jsx)(ce.ZP,{dataSource:C,renderItem:function(e,t){return(0,p.jsx)(ce.ZP.Item,{className:" pl-0 border-0",children:t+1},e.name)}})]}),(0,p.jsx)($.Z,{span:21,children:(0,p.jsxs)(X.Z,{children:[(0,p.jsxs)($.Z,{span:8,children:[(0,p.jsx)(Ke,{level:4,children:"Description"}),(0,p.jsx)(ce.ZP,{dataSource:C,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.name})},e.name)}})]}),(0,p.jsxs)($.Z,{span:5,children:[(0,p.jsx)(Ke,{level:4,children:" Qty"}),(0,p.jsx)(ce.ZP,{dataSource:C,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.quantity})},e.quantity)}})]}),(0,p.jsxs)($.Z,{span:5,children:[(0,p.jsx)(Ke,{level:4,children:"Unit "}),(0,p.jsx)(ce.ZP,{dataSource:C,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.price})},e.price)}})]}),(0,p.jsxs)($.Z,{span:6,children:[(0,p.jsx)(Ke,{level:4,children:"SUBTOTAL(S$)"}),(0,p.jsx)(ce.ZP,{dataSource:C,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.total})},e.total)}})]})]})})]})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)("div",{className:"d-flex justify-content-end",children:(0,p.jsxs)(X.Z,{style:{width:"40%"},className:"d-flex justify-content-center",children:[(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:H,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center ",children:[(0,p.jsx)(Xe,{strong:!0,children:e.text}),e.tag&&(0,p.jsx)("div",{className:"".concat(Qe," align-items-center"),children:(0,p.jsx)("span",{style:{background:e.tag.color,padding:"1.5px 4px"},className:"ml-2 ",children:e.tag.text})})]})},e.text)}})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:H,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center",children:["S$ ",e.amt]})},e.amt)}})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:L,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsx)("div",{className:"d-flex align-items-center ",children:(0,p.jsx)(Xe,{strong:!0,children:e.text})})},e.text)}})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:L,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center",children:["S$ ",e.amt]})},e.amt)}})})]})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)("div",{className:"mt-5 d-flex justify-content-start",style:{fontSize:"14px"},children:(0,p.jsxs)("div",{style:{width:"40%"},children:[(0,p.jsx)(re.Z,{}),(0,p.jsx)("h5",{children:(0,p.jsx)("b",{children:"Grand Energy Technologies Pte Ltd"})}),(0,p.jsx)("div",{style:{color:"#72849A"},children:"Officer Incharge"}),(0,p.jsx)("div",{style:{color:"#72849A"},children:b.quotationDate})]})})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between ".concat(Ve),children:[(0,p.jsx)("div",{children:(0,p.jsx)(c.Z,{onClick:function(){t.goBack()},children:"Back"})}),(0,p.jsxs)(c.Z,{onClick:function(){console.log("Downloading Contract..."),(0,Le.ZP)(e,$e,{filename:"Contract.pdf"})},children:[(0,p.jsx)(u.Z,{component:he.p5}),"Download Work Order"]})]})]})},"1"),(0,p.jsx)(Be.Z.TabPane,{tab:"Reminders ",children:(0,p.jsx)(He,{reminder:r,contractData:D})},"2"),(0,p.jsx)(Be.Z.TabPane,{tab:"Service Entry Sheet ",children:(0,p.jsx)(Ge,{workOrderId:n.id})},"3")]})]})},tt="ViewQuotation_card__ZkMgz",nt="ViewQuotation_add_details__mnvyD",it="ViewQuotation_total_amt__dS4Mq",st="ViewQuotation_action__VwrWd",at=j.Z.Title,ot=j.Z.Text,lt={page:{margin:Le.Zt.SMALL}},ct=function(){var e=(0,i.useRef)(),t=(0,s.k6)(),n=(0,s.UO)(),a=(0,i.useState)({customerId:0,email:"",name:"",phone:"",status:"",profile_pic:"",contact_name:"",office_contact_number:"",uen_number:"",postal_code:"",block_number:"",level_number:"",unit_number:"",street_number:"",country:"",created_by:"",other_details:{}}),r=(0,o.Z)(a,2),x=r[0],_=r[1],j=(0,i.useState)({id:0,customer_id:"",jobsite_id:"",customerName:"",jobsite:"",inquiryDate:"",quotationDate:"",amount:"",status:"",tc_customer_id:"",task_period_from_date:"",task_period_to_date:"",due_date:"",sub_total:0,tax:8,discount:0,total:0,tc_quotation_file:"",quotation_remarks:"",line_items:[]}),f=(0,o.Z)(j,2),v=f[0],N=f[1],S=(0,i.useState)([]),C=(0,o.Z)(S,2),w=C[0],k=C[1],I=(0,i.useState)([]),D=(0,o.Z)(I,2),A=(D[0],D[1],(0,i.useState)(!1)),F=(0,o.Z)(A,2),M=F[0],O=F[1],T=(0,i.useState)(!1),R=(0,o.Z)(T,2),L=R[0],J=R[1],Q=(0,i.useState)(!1),V=(0,o.Z)(Q,2),H=V[0],W=V[1],U=(0,i.useState)([]),z=(0,o.Z)(U,2),G=z[0],ee=z[1],te=(0,i.useState)(!1),ne=(0,o.Z)(te,2),ie=ne[0],se=ne[1],ae=(0,i.useState)([]),oe=(0,o.Z)(ae,2),le=oe[0],de=oe[1],me=(0,i.useState)([]),xe=(0,o.Z)(me,2),_e=xe[0],je=xe[1],fe=[{title:"Sr. No.",dataIndex:"sr_no"},{title:"Date",dataIndex:"date",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(y.Z,{value:t.date,className:"w-100",onChange:function(e){var n=G;n[G.findIndex((function(e){return e===t}))].date=e,ee((0,Z.Z)(n))}})})}},{title:"Time",dataIndex:"time",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(Y,{value:t.time,className:"w-100",format:"HH:mm A",use12Hours:!0,onChange:function(e){var n=G;n[G.findIndex((function(e){return e===t}))].time=e,ee((0,Z.Z)(n))}})})}},{title:"Title",dataIndex:"title",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(b.Z,{value:t.title,className:"w-100",onChange:function(e){var n=G;n[G.findIndex((function(e){return e===t}))].title=e.target.value,ee((0,Z.Z)(n))}})})}},{title:"Content",dataIndex:"description",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)(b.Z,{value:t.description,className:"w-100",onChange:function(e){var n=G;n[G.findIndex((function(e){return e===t}))].description=e.target.value,ee((0,Z.Z)(n))}})})}},{title:"Action",dataIndex:"",key:"x",render:function(e,t){return(0,p.jsx)(c.Z,{type:"danger",onClick:function(){!function(e){var t=G.filter((function(t){return t.sr_no!==e.sr_no}));ee(t)}(t)},className:"font-weight-bold",children:"remove"})}}],pe=function(){console.log(v),E.Z.post("/api/tc/update-quotation",(0,g.Z)((0,g.Z)({},v),{},{id:v.id,tc_customer_id:v.customer_id,status:"Contract Generated"})).then((function(e){var t=e.data;console.log(t),ve()})).catch((function(e){console.log(e)}))},ve=function(){E.Z.post("/api/tc/get-quotation",{id:+n.id}).then((function(e){var t=e.data.data;N({id:null===t||void 0===t?void 0:t.id,customer_id:null===t||void 0===t?void 0:t.tc_customer_id,jobsite_id:null===t||void 0===t?void 0:t.tc_customer_job_site_id,customerName:null===t||void 0===t?void 0:t.customer_name,jobsite:null===t||void 0===t?void 0:t.jobsite_name,inquiryDate:null!==t&&void 0!==t&&t.inquiry_date?B()(null===t||void 0===t?void 0:t.inquiry_date).format("DD-MM-YYYY HH:mm A"):"",quotationDate:B()(null===t||void 0===t?void 0:t.task_period_from_date).format("DD-MM-YYYY"),amount:null===t||void 0===t?void 0:t.total,status:(null===t||void 0===t?void 0:t.status)||"Quote Sent",tc_customer_id:null===t||void 0===t?void 0:t.tc_customer_id,task_period_from_date:B()(null===t||void 0===t?void 0:t.task_period_from_date),task_period_to_date:B()(null===t||void 0===t?void 0:t.task_period_to_date),due_date:B()(null===t||void 0===t?void 0:t.due_date).format("DD-MM-YYYY"),sub_total:(null===t||void 0===t?void 0:t.sub_total)||0,tax:(null===t||void 0===t?void 0:t.gst)||8,discount:(null===t||void 0===t?void 0:t.discount)||0,total:null===t||void 0===t?void 0:t.total,tc_quotation_file:null===t||void 0===t?void 0:t.tc_quotation_file,quotation_remarks:(null===t||void 0===t?void 0:t.quotation_remarks)||"",line_items:(null===t||void 0===t?void 0:t.line_items)||[],payment_term:(null===t||void 0===t?void 0:t.payment_term)||"",validity:(null===t||void 0===t?void 0:t.validity)||""}),console.log(v),t.tc_customer_id&&ge(t.tc_customer_id);var n=t.sub_total||t.total,i=t.total,s=null===t||void 0===t?void 0:t.tax,a=s/100*n;t.total&&(je([{text:"Subtotal",amt:"".concat(n||0)},{text:"GST",amt:"".concat(a.toFixed(2)||0),tag:{text:"".concat(s||0,"%"),color:"#0099A8"}}]),de([{text:"Grand Total",amt:i.toFixed(2)}]))})).catch((function(e){console.log(e)}))},ge=function(e){E.Z.post("/api/tc/get-customer",{id:e}).then((function(e){var t,n,i,s,a,o,l,c,r,d,u,m,h=e.data.data;if(h.other_details){var j=JSON.parse(h.other_details);h=(0,g.Z)((0,g.Z)({},h),j)}_({customerId:h.id,email:h.email,name:h.name,phone:h.phone,status:h.status,profile_pic:null===(t=h)||void 0===t?void 0:t.profile_pic,contact_name:null===(n=h)||void 0===n?void 0:n.contact_name,office_contact_number:null===(i=h)||void 0===i?void 0:i.office_contact_number,uen_number:null===(s=h)||void 0===s?void 0:s.uen_number,postal_code:(null===(a=h)||void 0===a?void 0:a.postal_code)||"000000",block_number:(null===(o=h)||void 0===o?void 0:o.block_number)||"",level_number:(null===(l=h)||void 0===l?void 0:l.level_number)||"",unit_number:(null===(c=h)||void 0===c?void 0:c.unit_number)||"",street_number:(null===(r=h)||void 0===r?void 0:r.street_number)||"",country:(null===(d=h)||void 0===d?void 0:d.country)||"Singapore",created_by:(null===(u=h)||void 0===u?void 0:u.created_by)||"",other_details:null===(m=h)||void 0===m?void 0:m.other_details}),console.log(x)})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){ve(),(0,E.Z)({method:"post",url:"/api/tc/get-contact-details",data:{}}).then((function(e){console.log(e.data);var t=e.data.data;k({email:t.email,mobile:t.mobile,tel:t.tel,address:t.address})})).catch((function(e){console.log(e)}))}),[]),(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(m.Z,{svg:h.RP,title:"Quotations / View Quotation"}),(0,p.jsx)(K.Z,{className:"quotation-card",children:(0,p.jsxs)("div",{ref:e,children:[(0,p.jsx)(K.Z,{className:tt,children:(0,p.jsxs)("div",{className:"mt-2 mb-2 w-100",children:[(0,p.jsx)("img",{src:ue,alt:"logo",style:{width:"20%"}}),(0,p.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(at,{strong:!0,level:3,children:"GRAND ENERGY TECHNOLOGIES PTE LTD"}),(0,p.jsxs)(ot,{children:[(0,p.jsx)("b",{children:"Email:"})," ",w.email||""]})]}),(0,p.jsx)("div",{})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)(ot,{children:[(0,p.jsx)("b",{children:"Phone:"})," ",w.tel||""]}),(0,p.jsx)("br",{}),(0,p.jsxs)(ot,{children:[(0,p.jsx)("b",{children:"UEN/GST No:"})," 201802457D"]})]}),(0,p.jsxs)("div",{className:"text-right",children:[(0,p.jsx)(ot,{children:"130 Jurong Gateway Road "}),(0,p.jsx)("br",{}),(0,p.jsx)(ot,{children:"#03-203 Singapore (600130) "})]})]})]})}),(0,p.jsxs)(K.Z,{className:nt,children:[(0,p.jsx)("div",{children:(0,p.jsx)("h5",{children:"Billed To:"})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{className:"mr-5",children:[(0,p.jsx)("br",{}),(0,p.jsx)(ot,{strong:!0,children:x.name}),(0,p.jsx)("br",{}),(0,p.jsx)(ot,{children:"".concat(x.block_number," ").concat(x.street_number,", ").concat(x.level_number,", ").concat(x.unit_number)}),(0,p.jsx)("br",{}),(0,p.jsx)(ot,{children:"".concat(x.country,", ").concat(x.postal_code)}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(ot,{children:x.email}),(0,p.jsx)("br",{}),(0,p.jsxs)(ot,{children:[(0,p.jsx)("b",{children:"Phone:"})," ",x.phone]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{className:"mr-4",children:[(0,p.jsx)("br",{}),(0,p.jsx)(ot,{strong:!0,children:"Quotation No"}),(0,p.jsx)("br",{}),(0,p.jsxs)(ot,{children:["#",v.id]}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(ot,{strong:!0,children:"Quotation Date"}),(0,p.jsx)("br",{}),(0,p.jsx)(ot,{children:v.quotationDate}),(0,p.jsx)("br",{})]}),(0,p.jsxs)("div",{className:"text-right",children:[(0,p.jsx)("br",{}),(0,p.jsx)(ot,{strong:!0,children:"Payment Term"}),(0,p.jsx)("br",{}),(0,p.jsx)(ot,{children:v.payment_term||"-"}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(ot,{strong:!0,children:"Validity"}),(0,p.jsx)("br",{}),(0,p.jsxs)(ot,{children:[v.validity||"0"," Days"]}),(0,p.jsx)("br",{})]})]})]})]}),(0,p.jsx)("div",{children:(0,p.jsxs)(X.Z,{children:[(0,p.jsxs)($.Z,{span:3,children:[(0,p.jsx)(at,{level:4,children:"Sr. No."}),(0,p.jsx)(ce.ZP,{dataSource:v.line_items,renderItem:function(e,t){return(0,p.jsx)(ce.ZP.Item,{className:" pl-0 border-0",children:t+1},e.name)}})]}),(0,p.jsx)($.Z,{span:21,children:(0,p.jsxs)(X.Z,{children:[(0,p.jsxs)($.Z,{span:8,children:[(0,p.jsx)(at,{level:4,children:"Description"}),(0,p.jsx)(ce.ZP,{dataSource:v.line_items,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.name})},e.name)}})]}),(0,p.jsxs)($.Z,{span:5,children:[(0,p.jsx)(at,{level:4,children:"Provisional Qty"}),(0,p.jsx)(ce.ZP,{dataSource:v.line_items,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.quantity})},e.quantity)}})]}),(0,p.jsxs)($.Z,{span:5,children:[(0,p.jsx)(at,{level:4,children:"Unit Price(S$)"}),(0,p.jsx)(ce.ZP,{dataSource:v.line_items,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.price})},e.price)}})]}),(0,p.jsxs)($.Z,{span:6,children:[(0,p.jsx)(at,{level:4,children:"SUBTOTAL(S$)"}),(0,p.jsx)(ce.ZP,{dataSource:v.line_items,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.total})},e.total)}})]})]})})]})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)("div",{className:"d-flex justify-content-end",children:(0,p.jsxs)(X.Z,{style:{width:"40%"},className:"d-flex justify-content-center",children:[(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:_e,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center ",children:[(0,p.jsx)(ot,{strong:!0,children:e.text}),e.tag&&(0,p.jsx)("div",{className:it,children:(0,p.jsx)("span",{style:{background:e.tag.color,padding:"1.5px 4px"},className:"ml-2 ",children:e.tag.text})})]})},e.text)}})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:_e,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center",children:["S$ ",e.amt]})},e.amt)}})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:le,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsx)("div",{className:"d-flex align-items-center ",children:(0,p.jsx)(ot,{strong:!0,children:e.text})})},e.text)}})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:le,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center",children:["S$ ",e.amt]})},e.amt)}})})]})}),(0,p.jsx)(re.Z,{}),(0,p.jsxs)("div",{className:"text-left w-75 mt-2",style:{fontSize:"14px"},children:[(0,p.jsx)("h5",{children:"Term and Conditions"}),(0,p.jsxs)("ol",{children:[(0,p.jsxs)("li",{children:[v.customerName," shall obtained all approvals from relevant authorities/stakeholders and facilitate our site personnel for site safety procedures including working at night or weekend/public holidays."]}),(0,p.jsxs)("li",{children:[v.customerName," site supervisor shall be presented during the whole course of installation work and final joint measurement."]}),(0,p.jsx)("li",{children:"50% downpayment upon confirmation, 50% upon completion of work."}),(0,p.jsx)("li",{children:"All price quote excludes GST."}),(0,p.jsx)("li",{children:"We shall not be liable for any loss, damage or injury or any consequential or indirect loss sustained by you or third parties pertaining to the works."}),(0,p.jsx)("li",{children:"Any other items which is not specifically indicated above. Any liability on this job is limited to half of the relevant sum awarded."})]}),(0,p.jsx)("p",{children:"We look forward to your confirmation"})]}),(0,p.jsxs)("div",{className:"mt-5 d-flex justify-content-between",style:{fontSize:"14px"},children:[(0,p.jsxs)("div",{style:{width:"40%"},children:[(0,p.jsx)(re.Z,{}),(0,p.jsx)("h5",{children:(0,p.jsx)("b",{children:"Grand Energy Technologies Pte Ltd"})}),(0,p.jsx)("div",{style:{color:"#72849A"},children:"GET Manager"}),(0,p.jsx)("div",{style:{color:"#72849A"},children:v.quotationDate})]}),(0,p.jsxs)("div",{style:{width:"20%"},children:[(0,p.jsx)(re.Z,{}),(0,p.jsx)("h5",{children:(0,p.jsx)("b",{children:"Customer Signature"})}),(0,p.jsx)("div",{style:{color:"#72849A"},children:"Name: "}),(0,p.jsx)("div",{style:{color:"#72849A"},children:"Designation: "}),(0,p.jsx)("div",{style:{color:"#72849A"},children:"Date: "})]})]})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between ".concat(st),children:[(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(c.Z,{onClick:function(){t.goBack()},children:"Back"}),(0,p.jsx)(c.Z,{style:{backgroundColor:"#5772FF",color:"#fff"},onClick:function(){t.push("/app/contract-management/quotations/generate-invoice/".concat(+n.id))},children:"Generate Invoice"}),"Contract Generated"!==v.status&&(0,p.jsx)(c.Z,{style:{backgroundColor:"#5772FF",color:"#fff"},onClick:function(){O(!0)},children:"Create Contract"})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,p.jsx)(c.Z,{onClick:function(){console.log("Downloading Attachment..."),window.open(v.tc_quotation_file)},children:"View Attachment"}),(0,p.jsxs)(c.Z,{onClick:function(){console.log("Downloading Quotation..."),(0,Le.ZP)(e,lt,{filename:"Quotation.pdf"})},children:[(0,p.jsx)(u.Z,{component:he.p5}),"Download Quotation"]})]})]}),(0,p.jsxs)(l.Z,{visible:M,centered:!0,maskClosable:!0,width:900,onCancel:function(){O(!1)},title:"Create Contract",footer:[(0,p.jsx)(c.Z,{style:{color:"#F5F5F5"},type:"primary",className:"font-weight-bold",onClick:function(){console.log(v),E.Z.post("/api/tc/new-contract",{tc_quotation_id:v.id,tc_customer_id:v.customer_id,tc_customer_job_site_id:v.customer_job_site_id||null,start_date:B()(L),end_date:B()(H),reminders:G,type:ie,status:"Active"}).then((function(e){console.log(e),J(null),W(null),se(null),ee([]),O(!1),P.ZP.success("Contract created successfully"),pe()})).catch((function(e){console.log(e),O(!1),P.ZP.error("Contract cannot be created, please try again later")}))},children:"Save"}),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){O(!1)},className:"font-weight-bold",children:"Cancel"})],children:[(0,p.jsxs)("div",{className:"w-50",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Date Of Commencement of Work"}),(0,p.jsx)(y.Z,{value:L,onChange:function(e){J(e)}})]}),(0,p.jsxs)("div",{className:"w-50",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Date of Expiration of Work"}),(0,p.jsx)(y.Z,{value:H,onChange:function(e){W(e)}})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Reminders"}),(0,p.jsx)(q.Z,{columns:fe,dataSource:G}),(0,p.jsx)(c.Z,{type:"primary",className:"font-weight-bold mt-2",onClick:function(){ee([].concat((0,Z.Z)(G),[{sr_no:G.length+1,date:null,title:"",description:""}]))},children:"Add Reminder"})]}),(0,p.jsxs)("div",{className:"w-50",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Contract Type"}),(0,p.jsxs)(d.Z,{className:"w-100",showSearch:!0,placeholder:"Contract Type",value:ie,onChange:function(e){se(e)},children:[(0,p.jsx)(d.Z.Option,{title:"None",value:"None",children:"None"},0),(0,p.jsx)(d.Z.Option,{title:"Ad Hoc",value:"Ad Hoc",children:"Ad Hoc"},1),(0,p.jsx)(d.Z.Option,{title:"Routine",value:"Routine",children:"Routine"},2)]})]})]})]})},rt=function(e){return(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)(u.Z,{component:h.zD}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{children:"New Invoice Created"}),(0,p.jsx)("p",{children:"Invoice is created successfully."})]})]})},dt=(G.Z.Dragger,b.Z.TextArea,function(e){var t=e.form,n=e.customers,s=e.customer_id,a=e.jobsData,l=(e.setJobsData,e.setJobFile,e.jobFileUrl),c=(0,i.useState)(""),r=(0,o.Z)(c,2),u=(r[0],r[1]),m=(0,i.useState)(""),x=(0,o.Z)(m,2),h=(x[0],x[1],(0,i.useState)("")),_=(0,o.Z)(h,2),j=(_[0],_[1],(0,i.useState)(0)),f=(0,o.Z)(j,2),v=f[0],Z=f[1],N=(0,i.useState)({name:"",url:""}),S=(0,o.Z)(N,2),C=(S[0],S[1],(0,i.useState)([])),w=(0,o.Z)(C,2),k=w[0],I=w[1],D=(0,i.useState)([]),Y=(0,o.Z)(D,2),P=Y[0],A=Y[1],F=localStorage.getItem("token"),M=function(){(0,E.Z)({method:"post",url:"/api/tc/get-customer-job-sites",headers:{Authorization:"Bearer ".concat(F)},data:{customer_id:t.getFieldValue("customer_id")||0,page_index:1,page_size:1e5,search:""}}).then((function(e){console.log(e.data),e.data.success&&I(e.data.data.data)})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){M(),(0,E.Z)({method:"post",url:"/api/tc/get-contracts",headers:{Authorization:"Bearer ".concat(F)},data:{customer_id:s||null,page_index:1,page_size:1e5,search:""}}).then((function(e){console.log(e.data);var n=e.data.data.data[0];e.data.success&&A(e.data.data.data),t.setFieldsValue((0,g.Z)((0,g.Z)({},t.getFieldsValue()),{},{contract_id:n.id}))})).catch((function(e){console.log(e)})),u([t.getFieldsValue()])}),[]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(K.Z,{className:"mt-3",children:[(0,p.jsx)(X.Z,{align:"top",children:(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(H.Z.Item,{name:"customer_id",label:"Customer Name",rules:[{required:!0,message:"Please select Customer!"}],children:(0,p.jsx)(d.Z,{onChange:M,disabled:!0,children:n.map((function(e,t){return(0,p.jsx)(d.Z.Option,{value:e.id,children:e.company},t)}))})})})}),(0,p.jsxs)(X.Z,{children:[(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(H.Z.Item,{label:"Jobsite",name:"jobsite_id",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(d.Z,{showSearch:!0,placeholder:"Jobsite",optionFilterProp:"children",filterOption:function(e,t){var n,i;return null===(n=(null!==(i=null===t||void 0===t?void 0:t.title)&&void 0!==i?i:"").toString().toLowerCase())||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.toLowerCase())},filterSort:function(e,t){var n,i;return(null!==(n=null===e||void 0===e?void 0:e.label)&&void 0!==n?n:"").toString().toLowerCase().localeCompare((null!==(i=null===t||void 0===t?void 0:t.label)&&void 0!==i?i:"").toString().toLowerCase())},value:v,onChange:Z,disabled:!0,children:k.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))})})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(H.Z.Item,{label:"Contract",name:"contract_id",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(d.Z,{showSearch:!0,placeholder:"contract",optionFilterProp:"children",filterOption:function(e,t){var n,i;return null===(n=(null!==(i=null===t||void 0===t?void 0:t.title)&&void 0!==i?i:"").toString().toLowerCase())||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.toLowerCase())},filterSort:function(e,t){var n,i;return(null!==(n=null===e||void 0===e?void 0:e.label)&&void 0!==n?n:"").toString().toLowerCase().localeCompare((null!==(i=null===t||void 0===t?void 0:t.label)&&void 0!==i?i:"").toString().toLowerCase())},value:v,onChange:Z,disabled:!0,children:P.map((function(e,t){return(0,p.jsxs)(d.Z.Option,{title:e.id,value:null===e||void 0===e?void 0:e.id,children:["#",e.id]},t)}))})})})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between heading-container my-4",children:[(0,p.jsx)("div",{className:"heading",children:"Job Details"}),(0,p.jsx)("div",{className:"heading d-flex justify-content-end align-items-center",children:l&&(0,p.jsx)("div",{className:"mr-3",style:{color:"blue"},children:(0,p.jsx)("a",{href:l,target:"_blank",children:"Quotation_File"})})})]}),(0,p.jsx)("div",{className:"mb-3",children:(0,p.jsx)(q.Z,{columns:[{title:"SR NO",dataIndex:"sr_no"},{title:"DESCRIPTION",dataIndex:"name"},{title:"PROVISIONAL QTY",dataIndex:"quantity"},{title:"UNIT PRICE",dataIndex:"price"},{title:"SUBTOTAL",dataIndex:"total"}],dataSource:a})}),(0,p.jsxs)(X.Z,{children:[(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(H.Z.Item,{label:"Discount (%)",name:"discount",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(b.Z,{type:"number"})})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(H.Z.Item,{label:"Due Date",name:"invoice_due_date",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(y.Z,{})})})]})]})})}),ut=function(){var e=H.Z.useForm(),t=(0,o.Z)(e,1)[0],n=(0,s.UO)(),a=(0,i.useState)([]),l=(0,o.Z)(a,2),r=l[0],d=l[1],u=(0,i.useState)({name:"",url:""}),x=(0,o.Z)(u,2),h=x[0],_=x[1],j=(0,i.useState)([]),f=(0,o.Z)(j,2),v=f[0],Z=f[1],b=(0,i.useState)({}),y=(0,o.Z)(b,2),N=y[0],S=y[1],C=(0,i.useState)({}),w=(0,o.Z)(C,2),k=w[0],I=w[1],D=(0,i.useState)({}),Y=(0,o.Z)(D,2),q=Y[0],A=Y[1],F=(0,i.useState)(!1),M=(0,o.Z)(F,2),O=M[0],T=M[1],R=(0,s.k6)(),L=(0,i.useState)(!1),J=(0,o.Z)(L,2),Q=J[0],V=J[1],W=(0,p.jsx)(ae.Z,{onClose:function(){V((function(e){return!e}))},children:(0,p.jsx)(rt,{})}),U=function(e){E.Z.post("/api/tc/get-contracts",{id:+e}).then((function(e){var n=e.data.data.data[0];console.log(n),n.length&&(A((0,g.Z)({},n)),t.setFieldsValue((0,g.Z)((0,g.Z)({},t.getFieldsValue()),{},{contract_id:n.id,discount:0,invoice_due_date:null}))),console.log(q),n.tc_quotation_id&&z(n.tc_quotation_id)})).catch((function(e){console.log(e)}))},z=function(e){E.Z.post("/api/tc/get-quotation",{id:+e}).then((function(e){var n=e.data.data;console.log(n),I((0,g.Z)({},n)),t.setFieldsValue({quotation_id:n.id,customer_id:null===n||void 0===n?void 0:n.tc_customer_id,jobsite_id:null===n||void 0===n?void 0:n.tc_customer_job_site_id,quotation_file:null===n||void 0===n?void 0:n.tc_quotation_file})})).catch((function(e){console.log(e)}))};(0,i.useEffect)((function(){n.id?(T(!0),E.Z.post("/api/tc/get-invoice",{id:+n.id}).then((function(e){var n=e.data.data;console.log(n),S((0,g.Z)({},n)),t.setFieldsValue({quotation_id:n.id,customer_id:null===n||void 0===n?void 0:n.tc_customer_id,jobsite_id:null===n||void 0===n?void 0:n.tc_customer_job_site_id,quotation_file:null===n||void 0===n?void 0:n.tc_quotation_file,discount:n.discount}),console.log(t.getFieldsValue()),n.tc_contract_id&&U(n.tc_contract_id),console.log(N)})).catch((function(e){console.log(e)}))):z(),E.Z.post("/api/tc/get-customers",{page_index:1,page_size:1e5,statuses:["ACTIVE","INACTIVE","PENDING APPROVAL"],searchText:null}).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){return{key:t,id:e.id,company:e.name,phoneNumber:e.phone,emailId:e.email}}));Z(v.concat(n)),console.log(v)})).catch((function(e){console.log(e)}))}),[]);return(0,p.jsxs)(i.Fragment,{children:[Q&&W,(0,p.jsx)(m.Z,{title:O?"Edit Invoice":"Create New Invoice"}),(0,p.jsxs)(H.Z,{form:t,labelCol:{span:10},wrapperCol:{span:18},layout:"vertical",onFinish:function(e){console.log(e),n.id?E.Z.post("/api/tc/update-invoice",{id:n.id,tc_customer_id:e.customer_id,tc_contract_id:e.contract_id,tc_quotation_id:e.quotation_id,tc_customer_job_site_id:e.jobsite_id,task_period_from_date:B()(e.quotationDate),task_period_to_date:B()(e.quotationDate).add(+e.expiryDate,"days"),due_date:B()(e.quotationDate).add(+e.expiryDate,"days"),sub_total:0,status:e.status||"Pending",tax:e.gst||8,total:k.total,tc_quotation_file:k.tc_quotation_file,quotation_remarks:e.remarks||"",line_items:k.line_items,tc_invoice_file:k.tc_quotation_file,invoice_remarks:"None",discount:e.discount||0},{headers:{"content-type":"application/json"}}).then((function(e){e.data.success?(P.ZP.success("Invoice generated successfully"),R.goBack()):P.ZP.warn(e.data.msg)})).catch((function(e){console.log(e)})):E.Z.post("/api/tc/new-invoice",{tc_customer_id:e.customer_id,tc_contract_id:e.contract_id,tc_quotation_id:e.quotation_id,tc_customer_job_site_id:e.jobsite_id,task_period_from_date:B()(e.quotationDate),task_period_to_date:B()(e.quotationDate).add(+e.expiryDate,"days"),due_date:B()(e.quotationDate).add(+e.expiryDate,"days"),sub_total:0,status:e.status||"Pending",tax:e.gst||8,total:k.total,tc_quotation_file:k.tc_quotation_file,quotation_remarks:e.remarks||"",line_items:k.line_items,tc_invoice_file:k.tc_quotation_file,invoice_remarks:"None",discount:e.discount||0},{headers:{"content-type":"application/json"}}).then((function(e){e.data.success?(P.ZP.success("Invoice generated successfully"),R.goBack()):P.ZP.warn(e.data.msg)})).catch((function(e){console.log(e)}))},children:[N?(0,p.jsx)(dt,{form:t,customer_id:N.tc_customer_id,customers:v,jobsData:r,setJobsData:d,jobFile:h,setJobFile:_,jobFileUrl:N.tc_quotation_file}):(0,p.jsx)(dt,{form:t,customer_id:k.tc_customer_id,customers:v,jobsData:r,setJobsData:d,jobFile:h,setJobFile:_,jobFileUrl:k.tc_quotation_file}),(0,p.jsx)(H.Z.Item,{children:(0,p.jsxs)("div",{className:"w-100 d-flex justify-content-start actions",children:[(0,p.jsx)(c.Z,{onClick:function(){R.goBack()},children:"Cancel"}),(0,p.jsx)(c.Z,{onClick:function(){t.resetFields(),d([]),_({name:"",url:""})},children:"Clear All"}),(0,p.jsx)(c.Z,{type:"primary",htmlType:"submit",style:{width:"fit-content"},children:"Generate Invoice"})]})})]})]})},mt="ViewInvoice_card__wz2IM",xt="ViewInvoice_add_details__CeTfg",ht="ViewInvoice_total_amt__kXcMj",_t="ViewInvoice_action__ee3wS",jt=j.Z.Title,ft=j.Z.Text,pt={page:{margin:Le.Zt.SMALL}},vt=function(){var e=(0,i.useRef)(),t=(0,s.k6)(),n=(0,s.UO)(),a=(0,i.useState)({customerId:0,email:"",name:"",phone:"",status:"",profile_pic:"",contact_name:"",office_contact_number:"",uen_number:"",postal_code:"",block_number:"",level_number:"",unit_number:"",street_number:"",country:"",created_by:"",other_details:{}}),l=(0,o.Z)(a,2),r=l[0],d=l[1],x=(0,i.useState)({id:0,customer_id:"",jobsite_id:"",customerName:"",jobsite:"",inquiryDate:"",quotationDate:"",amount:"",status:"",tc_customer_id:"",task_period_from_date:"",task_period_to_date:"",due_date:"",sub_total:0,tax:8,discount:0,total:0,tc_quotation_file:"",quotation_remarks:"",line_items:[]}),_=(0,o.Z)(x,2),j=_[0],f=_[1],Z=(0,i.useState)({id:0,customer_id:"",jobsite_id:"",customerName:"",jobsite:"",inquiryDate:"",quotationDate:"",amount:"",status:"",tc_customer_id:"",task_period_from_date:"",task_period_to_date:"",due_date:"",sub_total:0,tax:8,discount:0,total:0,tc_quotation_file:"",quotation_remarks:"",line_items:[]}),b=(0,o.Z)(Z,2),y=b[0],N=b[1],S=(0,i.useState)([]),C=(0,o.Z)(S,2),w=(C[0],C[1],(0,i.useState)(!1)),k=(0,o.Z)(w,2),I=(k[0],k[1],(0,i.useState)(!1)),D=(0,o.Z)(I,2),Y=(D[0],D[1],(0,i.useState)(!1)),P=(0,o.Z)(Y,2),q=(P[0],P[1],(0,i.useState)([])),A=(0,o.Z)(q,2),F=(A[0],A[1],(0,i.useState)(!1)),M=(0,o.Z)(F,2),O=(M[0],M[1],(0,i.useState)([])),T=(0,o.Z)(O,2),R=T[0],L=T[1],J=(0,i.useState)([]),Q=(0,o.Z)(J,2),V=Q[0],H=Q[1],W=(0,i.useState)([]),U=(0,o.Z)(W,2),z=U[0],G=U[1],ee=function(e,t){E.Z.post("/api/tc/get-contract",{id:+e}).then((function(e){var n=e.data.data;te(n.tc_quotation_id,t)})).catch((function(e){console.log(e)}))},te=function(e,t){E.Z.post("/api/tc/get-quotation",{id:e}).then((function(e){var n=e.data.data;f({id:null===n||void 0===n?void 0:n.id,customer_id:null===n||void 0===n?void 0:n.tc_customer_id,jobsite_id:null===n||void 0===n?void 0:n.tc_customer_job_site_id,customerName:null===n||void 0===n?void 0:n.customer_name,jobsite:null===n||void 0===n?void 0:n.jobsite_name,inquiryDate:null!==n&&void 0!==n&&n.inquiry_date?B()(null===n||void 0===n?void 0:n.inquiry_date).format("DD-MM-YYYY HH:mm A"):"",quotationDate:B()(null===n||void 0===n?void 0:n.task_period_from_date).format("DD-MM-YYYY"),amount:null===n||void 0===n?void 0:n.total,status:(null===n||void 0===n?void 0:n.status)||"Quote Sent",tc_customer_id:null===n||void 0===n?void 0:n.tc_customer_id,task_period_from_date:B()(null===n||void 0===n?void 0:n.task_period_from_date),task_period_to_date:B()(null===n||void 0===n?void 0:n.task_period_to_date),due_date:B()(null===n||void 0===n?void 0:n.due_date).format("DD-MM-YYYY"),sub_total:(null===n||void 0===n?void 0:n.sub_total)||0,tax:(null===n||void 0===n?void 0:n.gst)||8,discount:t||0,total:null===n||void 0===n?void 0:n.total,tc_quotation_file:null===n||void 0===n?void 0:n.tc_quotation_file,quotation_remarks:(null===n||void 0===n?void 0:n.quotation_remarks)||"",line_items:(null===n||void 0===n?void 0:n.line_items)||[],payment_term:(null===n||void 0===n?void 0:n.payment_term)||"",validity:(null===n||void 0===n?void 0:n.validity)||""}),console.log(j),n.tc_customer_id&&ne(n.tc_customer_id);var i=n.sub_total||n.total,s=n.total,a=null===n||void 0===n?void 0:n.tax,o=a/100*i,l=t,c=0;l&&(s-=c=l/100*n.total),n.total&&(G([{text:"Subtotal",amt:"".concat(i||0)},{text:"Discount",amt:c,tag:{text:"".concat(l||0,"%"),color:"#E82E2E"}},{text:"GST",amt:"".concat(o.toFixed(2)||0),tag:{text:"".concat(a||0,"%"),color:"#0099A8"}}]),H([{text:"Grand Total",amt:s.toFixed(2)}]))})).catch((function(e){console.log(e)}))},ne=function(e){E.Z.post("/api/tc/get-customer",{id:e}).then((function(e){var t,n,i,s,a,o,l,c,u,m,x,h,_=e.data.data;if(_.other_details){var j=JSON.parse(_.other_details);_=(0,g.Z)((0,g.Z)({},_),j)}d({customerId:_.id,email:_.email,name:_.name,phone:_.phone,status:_.status,profile_pic:null===(t=_)||void 0===t?void 0:t.profile_pic,contact_name:null===(n=_)||void 0===n?void 0:n.contact_name,office_contact_number:null===(i=_)||void 0===i?void 0:i.office_contact_number,uen_number:null===(s=_)||void 0===s?void 0:s.uen_number,postal_code:(null===(a=_)||void 0===a?void 0:a.postal_code)||"000000",block_number:(null===(o=_)||void 0===o?void 0:o.block_number)||"",level_number:(null===(l=_)||void 0===l?void 0:l.level_number)||"",unit_number:(null===(c=_)||void 0===c?void 0:c.unit_number)||"",street_number:(null===(u=_)||void 0===u?void 0:u.street_number)||"",country:(null===(m=_)||void 0===m?void 0:m.country)||"Singapore",created_by:(null===(x=_)||void 0===x?void 0:x.created_by)||"",other_details:null===(h=_)||void 0===h?void 0:h.other_details}),console.log(r)})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){E.Z.post("/api/tc/get-invoice",{id:+n.id}).then((function(e){var t,n=e.data.data;N((t={id:null===n||void 0===n?void 0:n.id,customer_id:null===n||void 0===n?void 0:n.tc_customer_id,jobsite_id:null===n||void 0===n?void 0:n.tc_customer_job_site_id,quotation_id:null===n||void 0===n?void 0:n.tc_quotation_id,customerName:null===n||void 0===n?void 0:n.customer_name,jobsite:null===n||void 0===n?void 0:n.jobsite_name,inquiryDate:null!==n&&void 0!==n&&n.inquiry_date?B()(null===n||void 0===n?void 0:n.inquiry_date).format("DD-MM-YYYY HH:mm A"):"",quotationDate:B()(null===n||void 0===n?void 0:n.task_period_from_date).format("DD-MM-YYYY"),amount:null===n||void 0===n?void 0:n.total,discount:null===n||void 0===n?void 0:n.discount,status:(null===n||void 0===n?void 0:n.status)||"Quote Sent",tc_customer_id:null===n||void 0===n?void 0:n.tc_customer_id,task_period_from_date:B()(null===n||void 0===n?void 0:n.task_period_from_date),task_period_to_date:B()(null===n||void 0===n?void 0:n.task_period_to_date),due_date:B()(null===n||void 0===n?void 0:n.due_date).format("DD-MM-YYYY"),sub_total:(null===n||void 0===n?void 0:n.sub_total)||0,tax:(null===n||void 0===n?void 0:n.gst)||8},(0,v.Z)(t,"discount",(null===n||void 0===n?void 0:n.discount)||0),(0,v.Z)(t,"total",null===n||void 0===n?void 0:n.total),(0,v.Z)(t,"tc_quotation_file",null===n||void 0===n?void 0:n.tc_quotation_file),(0,v.Z)(t,"quotation_remarks",(null===n||void 0===n?void 0:n.quotation_remarks)||""),(0,v.Z)(t,"line_items",(null===n||void 0===n?void 0:n.line_items)||[]),(0,v.Z)(t,"invoice_date",B()(n.created_at).format("DD-MM-YYYY")),t)),console.log(y),n.tc_contract_id&&ee(n.tc_contract_id,n.discount)})).catch((function(e){console.log(e)})),(0,E.Z)({method:"post",url:"/api/tc/get-contact-details",data:{}}).then((function(e){console.log(e.data);var t=e.data.data;L({email:t.email,mobile:t.mobile,tel:t.tel,address:t.address})})).catch((function(e){console.log(e)}))}),[]),(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(m.Z,{svg:h.RP,title:"Invoices / View Invoice"}),(0,p.jsx)(K.Z,{className:"quotation-card",children:(0,p.jsxs)("div",{ref:e,children:[(0,p.jsx)(K.Z,{className:mt,children:(0,p.jsxs)("div",{className:"mt-2 mb-2 w-100",children:[(0,p.jsx)("img",{src:ue,alt:"logo",style:{width:"20%"}}),(0,p.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(jt,{strong:!0,level:3,children:"GRAND ENERGY TECHNOLOGIES PTE LTD"}),(0,p.jsxs)(ft,{children:[(0,p.jsx)("b",{children:"Email:"})," ",R.email||""]})]}),(0,p.jsx)("div",{})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)(ft,{children:[(0,p.jsx)("b",{children:"Phone:"})," ",R.tel||""]}),(0,p.jsx)("br",{}),(0,p.jsxs)(ft,{children:[(0,p.jsx)("b",{children:"UEN/GST No:"})," 201802457D"]})]}),(0,p.jsxs)("div",{className:"text-right",children:[(0,p.jsx)(ft,{children:"Bik 130 Jurong Gateway Road "}),(0,p.jsx)("br",{}),(0,p.jsx)(ft,{children:"#03-203 Singapore 600130 "})]})]})]})}),(0,p.jsxs)(K.Z,{className:xt,children:[(0,p.jsx)("div",{children:(0,p.jsx)("h5",{children:"Billed To:"})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{className:"mr-5",children:[(0,p.jsx)("br",{}),(0,p.jsx)(ft,{strong:!0,children:r.name}),(0,p.jsx)("br",{}),(0,p.jsx)(ft,{children:"".concat(r.block_number," ").concat(r.street_number,", ").concat(r.level_number,", ").concat(r.unit_number)}),(0,p.jsx)("br",{}),(0,p.jsx)(ft,{children:"".concat(r.country,", ").concat(r.postal_code)}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(ft,{children:r.email}),(0,p.jsx)("br",{}),(0,p.jsxs)(ft,{children:[(0,p.jsx)("b",{children:"Phone:"})," ",r.phone]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{className:"mr-4",children:[(0,p.jsx)("br",{}),(0,p.jsx)(ft,{strong:!0,children:"Invoice No"}),(0,p.jsx)("br",{}),(0,p.jsxs)(ft,{children:["#",y.id]}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(ft,{strong:!0,children:"Invoice Date"}),(0,p.jsx)("br",{}),(0,p.jsx)(ft,{children:y.invoice_date}),(0,p.jsx)("br",{})]}),(0,p.jsxs)("div",{className:"text-right",children:[(0,p.jsx)("br",{}),(0,p.jsx)(ft,{strong:!0,children:"Payment Term"}),(0,p.jsx)("br",{}),(0,p.jsx)(ft,{children:j.payment_term}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(ft,{strong:!0,children:"Validity"}),(0,p.jsx)("br",{}),(0,p.jsx)(ft,{children:j.validity}),(0,p.jsx)("br",{})]})]})]})]}),(0,p.jsx)("div",{children:(0,p.jsxs)(X.Z,{children:[(0,p.jsxs)($.Z,{span:3,children:[(0,p.jsx)(jt,{level:4,children:"Sr. No."}),(0,p.jsx)(ce.ZP,{dataSource:j.line_items,renderItem:function(e,t){return(0,p.jsx)(ce.ZP.Item,{className:" pl-0 border-0",children:t+1},e.name)}})]}),(0,p.jsx)($.Z,{span:21,children:(0,p.jsxs)(X.Z,{children:[(0,p.jsxs)($.Z,{span:8,children:[(0,p.jsx)(jt,{level:4,children:"Description"}),(0,p.jsx)(ce.ZP,{dataSource:j.line_items,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.name})},e.name)}})]}),(0,p.jsxs)($.Z,{span:5,children:[(0,p.jsx)(jt,{level:4,children:"Provisional Qty"}),(0,p.jsx)(ce.ZP,{dataSource:j.line_items,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.quantity})},e.quantity)}})]}),(0,p.jsxs)($.Z,{span:5,children:[(0,p.jsx)(jt,{level:4,children:"Unit Price(S$)"}),(0,p.jsx)(ce.ZP,{dataSource:j.line_items,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.price})},e.price)}})]}),(0,p.jsxs)($.Z,{span:6,children:[(0,p.jsx)(jt,{level:4,children:"SUBTOTAL(S$)"}),(0,p.jsx)(ce.ZP,{dataSource:j.line_items,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.total})},e.total)}})]})]})})]})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)("div",{className:"d-flex justify-content-end",children:(0,p.jsxs)(X.Z,{style:{width:"40%"},className:"d-flex justify-content-center",children:[(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:z,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center ",children:[(0,p.jsx)(ft,{strong:!0,children:e.text}),e.tag&&(0,p.jsx)("div",{className:ht,children:(0,p.jsx)("span",{style:{background:e.tag.color,padding:"1.5px 4px"},className:"ml-2 ",children:e.tag.text})})]})},e.text)}})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:z,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center",children:["S$ ",e.amt]})},e.amt)}})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:V,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsx)("div",{className:"d-flex align-items-center ",children:(0,p.jsx)(ft,{strong:!0,children:e.text})})},e.text)}})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:V,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center",children:["S$ ",e.amt]})},e.amt)}})})]})}),(0,p.jsx)(re.Z,{}),(0,p.jsxs)("div",{className:"text-left w-75 mt-2",style:{fontSize:"14px"},children:[(0,p.jsx)("h5",{children:"Term and Conditions"}),(0,p.jsxs)("ol",{children:[(0,p.jsxs)("li",{children:[j.customerName," shall obtained all approvals from relevant authorities/stakeholders and facilitate our site personnel for site safety procedures including working at night or weekend/public holidays."]}),(0,p.jsxs)("li",{children:[j.customerName," site supervisor shall be presented during the whole course of installation work and final joint measurement."]}),(0,p.jsx)("li",{children:"50% downpayment upon confirmation, 50% upon completion of work."}),(0,p.jsx)("li",{children:"All price quote excludes GST."}),(0,p.jsx)("li",{children:"We shall not be liable for any loss, damage or injury or any consequential or indirect loss sustained by you or third parties pertaining to the works."}),(0,p.jsx)("li",{children:"Any other items which is not specifically indicated above. Any liability on this job is limited to half of the relevant sum awarded."})]}),(0,p.jsx)("p",{children:"We look forward to your confirmation"})]}),(0,p.jsxs)("div",{className:"mt-5 d-flex justify-content-between",style:{fontSize:"14px"},children:[(0,p.jsxs)("div",{style:{width:"40%"},children:[(0,p.jsx)(re.Z,{}),(0,p.jsx)("h5",{children:(0,p.jsx)("b",{children:"Grand Energy Technologies Pte Ltd"})}),(0,p.jsx)("div",{style:{color:"#72849A"},children:"GET Manager"}),(0,p.jsx)("div",{style:{color:"#72849A"},children:j.quotationDate})]}),(0,p.jsx)("div",{style:{width:"20%"}})]})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between ".concat(_t),children:[(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(c.Z,{className:"mr-1",onClick:function(){t.goBack()},children:"Back"}),(0,p.jsx)(c.Z,{className:"mr-1",style:{backgroundColor:"#5772FF",color:"#fff"},onClick:function(){t.push("/app/customer-management/customer-accounts/add-new-payments/".concat(n.id))},children:"Record Payment"})]}),(0,p.jsxs)(c.Z,{onClick:function(){console.log("Downloading Quotation..."),(0,Le.ZP)(e,pt,{filename:"Quotation.pdf"})},children:[(0,p.jsx)(u.Z,{component:he.p5}),"Download PDF"]})]})]})},gt=(n(93271),n(16987),n(2885)),Zt=(n(31697),n(57520)),bt=(n(19969),n(73034),n(96110),n(36462),function(){return(0,p.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,p.jsx)("g",{"clip-path":"url(#clip0_3143_14787)",children:(0,p.jsx)("path",{d:"M10.1667 5.66667C13.325 5.66667 16.1417 7.44167 17.5167 10.25C16.1417 13.0583 13.325 14.8333 10.1667 14.8333C7.00833 14.8333 4.19167 13.0583 2.81667 10.25C4.19167 7.44167 7.00833 5.66667 10.1667 5.66667ZM10.1667 4C6 4 2.44167 6.59167 1 10.25C2.44167 13.9083 6 16.5 10.1667 16.5C14.3333 16.5 17.8917 13.9083 19.3333 10.25C17.8917 6.59167 14.3333 4 10.1667 4ZM10.1667 8.16667C11.3167 8.16667 12.25 9.1 12.25 10.25C12.25 11.4 11.3167 12.3333 10.1667 12.3333C9.01667 12.3333 8.08333 11.4 8.08333 10.25C8.08333 9.1 9.01667 8.16667 10.1667 8.16667ZM10.1667 6.5C8.1 6.5 6.41667 8.18333 6.41667 10.25C6.41667 12.3167 8.1 14 10.1667 14C12.2333 14 13.9167 12.3167 13.9167 10.25C13.9167 8.18333 12.2333 6.5 10.1667 6.5Z",fill:"#455560"})}),(0,p.jsx)("defs",{children:(0,p.jsx)("clipPath",{id:"clip0_3143_14787",children:(0,p.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})}),yt=function(){return(0,p.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,p.jsx)("g",{"clip-path":"url(#clip0_886_17351)",children:(0,p.jsx)("path",{d:"M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM6 20V4H13V8H18V20H6ZM11 19H13V18H14C14.55 18 15 17.55 15 17V14C15 13.45 14.55 13 14 13H11V12H15V10H13V9H11V10H10C9.45 10 9 10.45 9 11V14C9 14.55 9.45 15 10 15H13V16H9V18H11V19Z",fill:"#455560"})}),(0,p.jsx)("defs",{children:(0,p.jsx)("clipPath",{id:"clip0_886_17351",children:(0,p.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]})},Nt=function(e){var t=e.contract_id,n=e.setOpenContractModal,i=e.record,a=(e.getData,e.setQuoteData),o=e.setJobsData,l=(0,s.k6)();(0,s.$B)();return(0,p.jsx)(F.Z,{menu:(0,p.jsxs)(f.Z,{children:[(0,p.jsx)(f.Z.Item,{onClick:function(){n(!0),a(i),o(i.line_items?JSON.parse(i.line_items):[])},disabled:"Completed"===i.status,children:(0,p.jsxs)("span",{className:"d-flex align-items-center",children:[(0,p.jsx)(u.Z,{className:"mr-2",component:yt})," Create Service Entry Sheet"]})}),(0,p.jsx)(f.Z.Item,{onClick:function(){l.push("/app/contract-management/work-orders/view-work-order/".concat(t))},children:(0,p.jsxs)("span",{className:"d-flex align-items-center",children:[(0,p.jsx)(u.Z,{className:"mr-2",component:bt}),"View Service Order"]})})]})})},St=n(66023),Ct=function(e){e.setsetPage;var t=e.searchText,n=(e.statuses,e.selectedFilter),s=e.selectedCustomerFilter,a=e.id,r=e.selectedJobsiteFilter,u=e.selectedTypeFilter,m=e.selectedStatusFilter,x=(0,i.useState)([]),h=(0,o.Z)(x,2),_=(h[0],h[1],(0,i.useState)([])),j=(0,o.Z)(_,2),f=j[0],N=j[1],S=(0,i.useState)(!1),C=(0,o.Z)(S,2),w=C[0],k=C[1],I=(0,i.useState)(null),D=(0,o.Z)(I,2),Y=D[0],A=D[1],F=(0,i.useState)(null),M=(0,o.Z)(F,2),O=M[0],T=M[1],R=(0,i.useState)({}),L=(0,o.Z)(R,2),J=L[0],Q=L[1],V=(0,i.useState)(null),H=(0,o.Z)(V,2),W=H[0],U=H[1],z=localStorage.getItem("customer_id"),G=(0,i.useState)([]),K=(0,o.Z)(G,2),X=K[0],$=K[1],te=(0,i.useState)(""),ne=(0,o.Z)(te,2),ie=ne[0],se=ne[1],ae=(0,i.useState)(null),oe=(0,o.Z)(ae,2),le=oe[0],ce=oe[1],re=(0,i.useState)(null),de=(0,o.Z)(re,2),ue=de[0],me=de[1],xe=(0,i.useState)(""),he=(0,o.Z)(xe,2),_e=he[0],je=he[1],fe=(0,i.useState)(""),pe=(0,o.Z)(fe,2),ve=pe[0],ge=pe[1],Ze=(0,i.useState)(""),be=(0,o.Z)(Ze,2),ye=be[0],Ne=be[1],Se=(0,i.useState)(!1),Ce=(0,o.Z)(Se,2),we=Ce[0],ke=Ce[1],Ie=(0,i.useState)([]),De=(0,o.Z)(Ie,2),Ye=(De[0],De[1]),Pe=[{title:" Id",dataIndex:"id"},{title:"Customer Name",dataIndex:"customer_name"},{title:"Jobsite",dataIndex:"job_site_name"},{title:"Commence On",dataIndex:"commence_on"},{title:"Expired On",dataIndex:"expire_on"},{title:"Status",dataIndex:"status",render:function(e,t){return(0,p.jsx)("span",{style:{color:"#00AB6F",backgroundColor:"#EDFFF9",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:t.status},t.status)}},{title:"Action",dataIndex:"",key:"x",render:function(e,t){return(0,p.jsx)(Nt,{setJobsData:$,setQuoteData:Q,contract_id:t.id,record:t,setOpenContractModal:k,getData:Ae})}}],qe=[{title:"SR NO",dataIndex:"sr_no"},{title:"DESCRIPTION",dataIndex:"name"},{title:"QTY",dataIndex:"quantity"},{title:"UNIT PRICE",dataIndex:"price"},{title:"SUBTOTAL",dataIndex:"total"},{title:"Action",dataIndex:"",render:function(e,t){return(0,p.jsx)(c.Z,{type:"danger",className:"mt-2",onClick:function(){!function(e){var t=X.filter((function(t){return t!=e}));$(t)}(t)},children:"Remove"})}}];(0,i.useEffect)((function(){E.Z.post("/api/tc/get-work-orders",(0,g.Z)((0,g.Z)({page_index:1,page_size:10},a&&{contract_id:+a}),{},(0,v.Z)({statuses:null,search:t||null,customer_id:s||null,job_site_id:r||null,status:m||null,contract_type:u||null},"customer_id",z))).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){var n;return(0,g.Z)((0,g.Z)({},e),{},(n={key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.jobsite_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",e.status),(0,v.Z)(n,"start_date",e.start_date),n))}));N(n)})).catch((function(e){console.log(e)}))}),[t]),(0,i.useEffect)((function(){E.Z.post("/api/tc/get-work-orders",(0,g.Z)((0,g.Z)({page_index:1,page_size:10},a&&{contract_id:+a}),{},(0,v.Z)({statuses:null,search:t||null,customer_id:s||null,job_site_id:r||null,status:m||null,contract_type:u||null},"customer_id",z))).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){var n;return(0,g.Z)((0,g.Z)({},e),{},(n={key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.jobsite_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",e.status),(0,v.Z)(n,"start_date",e.start_date),n))}));N(n)})).catch((function(e){console.log(e)}))}),[n]);var Ae=function(){E.Z.post("/api/tc/get-work-orders",(0,g.Z)((0,g.Z)({page_index:1,page_size:10,statuses:null},a&&{contract_id:+a}),{},(0,v.Z)({search:t||null,customer_id:s||null,job_site_id:r||null,status:m||null,contract_type:u||null},"customer_id",z))).then((function(e){var t=e.data.data.data;console.log(t);var n=t.map((function(e,t){var n;return(0,g.Z)((0,g.Z)({},e),{},(n={key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.jobsite_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",e.status),(0,v.Z)(n,"start_date",e.start_date),n))}));N(n)})).catch((function(e){console.log(e)}))},Fe=function(){k(!1),ke(!1),A(null),U(null),Ye([]),je(""),ge(""),Ne(""),se(""),ce(null),me(null),$([])};return(0,p.jsxs)("div",{children:[(0,p.jsx)(q.Z,{columns:Pe,dataSource:f}),(0,p.jsxs)(l.Z,{visible:w,centered:!0,maskClosable:!0,width:900,onCancel:Fe,title:"Create Service Entry Sheet",footer:[(0,p.jsx)(c.Z,{style:{color:"#F5F5F5"},type:"primary",className:"font-weight-bold",onClick:function(){var e;console.log(J),Y&&W&&O&&ve&&ye&&_e?E.Z.post("/api/tc/new-service_entry_sheet",(e={tc_quotation_id:J.quotation_id,date:B()(),tc_contract_id:J.tc_contract_id,tc_customer_id:J.tc_customer_id,tc_customer_job_site_id:J.tc_customer_job_site_id||null},(0,v.Z)(e,"tc_quotation_id",J.tc_quotation_id),(0,v.Z)(e,"tc_work_order_id",J.id),(0,v.Z)(e,"target_completion_date",B()(Y)),(0,v.Z)(e,"actual_completion_date",B()(W)),(0,v.Z)(e,"order_type",O),(0,v.Z)(e,"gl_number",ve),(0,v.Z)(e,"project_number",ye),(0,v.Z)(e,"co_regn_no",_e),(0,v.Z)(e,"line_items",X),(0,v.Z)(e,"status","Active"),e)).then((function(e){console.log(e),A(null),U(null),T(null),Ye([]),k(!1),ge(""),Ne(""),je(""),Ae(),window.location.reload(),P.ZP.success("Service TimeSheet created successfully")})).catch((function(e){console.log(e),k(!1),P.ZP.error("Work Order creation failed")})):P.ZP.error("Please fill all the fields")},children:"Save"}),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){k(!1)},className:"font-weight-bold",children:"Cancel"})],children:[(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Target Completion Date"}),(0,p.jsx)(y.Z,{value:Y,onChange:function(e){A(e)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Actual Completion Date"}),(0,p.jsx)(y.Z,{value:W,onChange:function(e){U(e)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"GL Number"}),(0,p.jsx)(b.Z,{value:ve,onChange:function(e){ge(e.target.value)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Project Number"}),(0,p.jsx)(b.Z,{value:ye,onChange:function(e){Ne(e.target.value)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"CO Regn No"}),(0,p.jsx)(b.Z,{value:_e,onChange:function(e){je(e.target.value)}})]}),(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsx)("h4",{className:"mb-2 mt-4",children:"Contract Type"}),(0,p.jsxs)(d.Z,{className:"w-100",showSearch:!0,placeholder:"Contract Type",value:O,onChange:function(e){T(e)},children:[(0,p.jsx)(d.Z.Option,{title:"None",value:"None",children:"None"},0),(0,p.jsx)(d.Z.Option,{title:"Ad Hoc",value:"Ad Hoc",children:"Ad Hoc"},1),(0,p.jsx)(d.Z.Option,{title:"Routine",value:"Routine",children:"Routine"},2)]})]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)(q.Z,{columns:qe,dataSource:X}),(0,p.jsx)("div",{className:"d-flex justify-content-end",children:(0,p.jsx)(c.Z,{type:"primary",onClick:function(){ke(!0)},className:"mt-2",children:"Add Job"})})]})]}),(0,p.jsxs)(l.Z,{visible:we,centered:!0,maskClosable:!0,onCancel:Fe,title:"Job Details",footer:[(0,p.jsx)(c.Z,{type:"primary",className:"font-weight-bold",onClick:function(){ie||P.ZP.error("Please fill Description"),le||P.ZP.error("Please fill Quantity"),ue||P.ZP.error("Please fill Unit Price"),$([].concat((0,Z.Z)(X),[{sr_no:X.length+1,name:ie,quantity:le,price:ue,total:+le*+ue||0}])),se(""),ce(null),me(null),ke(!1)},children:"Save"}),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){se(""),ce(null),me(null),ke(!1)},className:"font-weight-bold",children:"Cancel"})],children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2",children:"Description"}),(0,p.jsx)(St.default,{rows:4,onChange:function(e){se(e.target.value)},value:ie})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2 mt-2",children:" Quantity"}),(0,p.jsx)(ee.Z,{min:0,onChange:function(e){ce(e)},value:le})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"mb-2 mt-2",children:"Unit Price"}),(0,p.jsx)(ee.Z,{min:0,onChange:function(e){me(e)},value:ue})]})]})]})};var wt=function(e){var t=e.id,n=(0,i.useState)(""),s=(0,o.Z)(n,2),a=s[0],l=s[1],j=(0,i.useState)(1),Z=(0,o.Z)(j,2),b=(Z[0],Z[1]),y=(0,i.useState)([]),N=(0,o.Z)(y,2),S=N[0],C=(N[1],(0,i.useState)([])),w=(0,o.Z)(C,2),k=w[0],I=w[1],D=(0,i.useState)(["All"]),Y=(0,o.Z)(D,2),P=(Y[0],Y[1],localStorage.getItem("customer_id")),q=(0,i.useState)(!1),A=(0,o.Z)(q,2),F=A[0],M=A[1],O=(0,i.useState)(!1),T=(0,o.Z)(O,2),R=T[0],L=T[1],J=(0,i.useState)(!1),V=(0,o.Z)(J,2),H=V[0],W=V[1],U=(0,i.useState)(!1),z=(0,o.Z)(U,2),G=z[0],K=z[1],X=(0,i.useState)(!1),$=(0,o.Z)(X,2),ee=$[0],te=$[1],ne=(0,i.useState)(!1),ie=(0,o.Z)(ne,2),se=ie[0],ae=ie[1],oe=(0,i.useState)(!1),le=(0,o.Z)(oe,2),ce=le[0],re=le[1],de=(0,i.useState)(!1),ue=(0,o.Z)(de,2),me=ue[0],xe=ue[1];return localStorage.getItem("token"),(0,i.useEffect)((function(){E.Z.post("/api/tc/get-work-orders",(0,g.Z)({page_index:1,page_size:1e5,search:null,customer_id:P},t&&{contract_id:+t})).then((function(e){var t=e.data.data.data.map((function(e,t){var n;return n={sr_no:t+1,key:e.id,id:e.id,customer_name:e.customer_name||e.tc_customer_id,jobsite_name:e.job_site_name||e.tc_customer_job_site_id||"-",contract_type:e.type,commence_on:B()(e.start_date).format("DD-MM-YYYY"),expire_on:B()(e.end_date).format("DD-MM-YYYY")},(0,v.Z)(n,"contract_type",e.type),(0,v.Z)(n,"status",e.status),n}));I(t)})).catch((function(e){console.log(e)})),(0,E.Z)({method:"post",url:"/api/tc/get-customers",data:{page_index:1,page_size:1e5,customer_id:null,search:null}}).then((function(e){e.data.success&&L(e.data.data.data),console.log("Customers data fetched"),console.log(e.data.data.data)})).catch((function(e){console.log(e)})),(0,E.Z)({method:"post",url:"/api/tc/get-customer-job-sites",data:{page_index:1,page_size:1e5,customer_id:null,search:null}}).then((function(e){e.data.success&&M(e.data.data.data),console.log("Job sites data fetched"),console.log(e.data.data.data)})).catch((function(e){console.log(e)}))}),[]),f.Z,f.Z.Item,f.Z.SubMenu,f.Z.Item,f.Z.Item,f.Z.Item,(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)(m.Z,{title:"Work Order"}),(0,p.jsx)("div",{className:"d-flex justify-content-between mb-3",children:(0,p.jsxs)("div",{className:" d-flex align-items-center justify-content-between mr-2",children:[(0,p.jsx)(x.Z,{setSearchText:l}),!t&&(0,p.jsxs)(c.Z,{className:"d-flex align-items-center ml-2",onClick:function(){W((function(e){return console.log("Drawer "+(e?"Closed":"Open")),!e}))},children:[(0,p.jsx)(u.Z,{className:"mr-2",component:h.k1}),"Filters"]}),(0,p.jsx)(Q.CSVLink,{data:k,headers:[{label:"Sr. No",key:"sr_no"},{label:"ID",key:"id"},{label:"Customer Name",key:"customer_name"},{label:"Jobsite",key:"jobsite_name"},{label:"Commence On",key:"commence_on"},{label:"Expired On",key:"expire_on"},{label:"Status",key:"status"}],filename:"All-Work-Orders.csv",children:(0,p.jsxs)(c.Z,{className:"d-flex align-items-center ml-2",children:[(0,p.jsx)("img",{className:"mr-2",src:_.Z,alt:"exportIcon"}),"Export"]})})]})})]}),(0,p.jsx)("div",{children:(0,p.jsx)(Ct,{setsetPage:b,searchText:a,statuses:S,selectedCustomerFilter:G,selectedJobsiteFilter:ee,selectedStatusFilter:ce,selectedFilter:me,selectedTypeFilter:se,id:t})}),(0,p.jsx)("div",{children:(0,p.jsxs)(r.Z,{title:"Filter",placement:"right",onClose:function(){console.log("Closed"),W(!1)},open:H,closable:!0,visible:H,footer:[(0,p.jsx)(c.Z,{style:{color:"#F5F5F5"},type:"primary",className:"font-weight-bold mr-2",onClick:function(){xe((function(e){return!e})),W(!1)},children:"Apply"},"submit"),(0,p.jsx)(c.Z,{style:{color:"#000B23"},onClick:function(){xe((function(e){return!e})),K(!1),te(!1),ae(!1),re(!1),W(!1)},className:"font-weight-bold",children:"Reset"},"cancel")],children:[(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("h4",{children:"Customer"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Jobsite",value:G,onChange:function(e){K(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),R&&R.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))]})]}),(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("h4",{children:"Jobsite"}),(0,p.jsxs)(d.Z,{showSearch:!0,placeholder:"Jobsite",value:ee,onChange:function(e){te(e)},className:"w-100",children:[(0,p.jsx)(d.Z.Option,{title:"None",value:null,children:"None"},"None"),F&&F.map((function(e,t){return(0,p.jsx)(d.Z.Option,{title:e.name,value:null===e||void 0===e?void 0:e.id,children:e.name},t)}))]})]})]})})]})};var kt=function(e){var t=e.customerData;return(0,p.jsx)("div",{children:(0,p.jsx)(K.Z,{style:{background:"#FAFAFB",textAlign:"start"},children:(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{className:"w-25",children:[(0,p.jsx)("div",{className:"d-flex justify-content-start my-1",children:(0,p.jsx)("h5",{children:"Customer Name: \u2003"})}),(0,p.jsx)("div",{className:"d-flex justify-content-start my-1",children:(0,p.jsx)("h5",{children:"Job Site Name: \u2003"})}),(0,p.jsx)("div",{className:"d-flex justify-content-start my-1",children:(0,p.jsx)("h5",{children:"Commence Date: \u2003"})}),(0,p.jsx)("div",{className:"d-flex justify-content-start my-1",children:(0,p.jsx)("h5",{children:"Type: \u2003"})})]}),(0,p.jsxs)("div",{className:"w-75",children:[(0,p.jsx)("div",{className:"d-flex justify-content-start my-1",children:(0,p.jsx)("h5",{children:t.customer_name})}),(0,p.jsx)("div",{className:"d-flex justify-content-start my-1",children:(0,p.jsx)("h5",{children:t.job_site_name})}),(0,p.jsx)("div",{className:"d-flex justify-content-start my-1",children:(0,p.jsx)("h5",{children:B()(t.start_date).format("DD-MM-YYYY")})}),(0,p.jsx)("div",{className:"d-flex justify-content-start my-1",children:(0,p.jsx)("h5",{children:t.type})})]})]})})})},It=n(19741),Dt=[{title:"Basic Details"},{title:"Work Orders"},{title:"Service Entry Sheets"}];var Yt=function(){var e=(0,s.UO)(),t=(0,i.useState)({reminders:[]}),n=(0,o.Z)(t,2),a=n[0],l=n[1],r=(0,i.useState)("1"),d=(0,o.Z)(r,2),u=d[0],x=d[1],h=[(0,p.jsx)(kt,{customerData:a}),(0,p.jsx)(wt,{id:e.id}),(0,p.jsx)(Ge,{id:e.id})],_=(It.rU,"/app/customer-management/customer-accounts/add-new-customer-user/".concat(e.id),c.Z,gt.Z,(0,i.useState)(!1)),j=(0,o.Z)(_,2);return j[0],j[1],(0,s.TH)(),(0,i.useEffect)((function(){E.Z.post("/api/tc/get-contract",{id:+e.id}).then((function(e){var t=e.data.data;l(t)})).catch((function(e){console.log(e)}))}),[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m.Z,{title:"Contract Management / Contract List / View Contract",svg:Zt.OW}),(0,p.jsx)(Be.Z,{activeKey:u,size:"large",onChange:function(e){x(e)},children:h.map((function(e,t){return(0,p.jsx)(Be.Z.TabPane,{tab:(0,p.jsx)("span",{className:"d-flex align-items-center hover-color",children:Dt[t].title}),children:e},(t+1).toString())}))})]})},Pt="Service_add_details__tbgRh",qt="Service_total_amt__1tt9h",At="Service_action__2t1Tr",Ft=j.Z.Title,Mt=j.Z.Text,Ot={page:{margin:Le.Zt.SMALL}},Tt=function(){var e=(0,i.useRef)(),t=(0,s.k6)(),n=(0,s.UO)(),a=(0,i.useState)([]),l=(0,o.Z)(a,2),r=(l[0],l[1],(0,i.useState)({customerId:0,email:"",name:"",phone:"",status:"",profile_pic:"",contact_name:"",office_contact_number:"",uen_number:"",postal_code:"",block_number:"",level_number:"",unit_number:"",street_number:"",country:"",created_by:"",other_details:{}})),d=(0,o.Z)(r,2),x=d[0],_=d[1],j=(0,i.useState)({id:0,customer_id:"",jobsite_id:"",customerName:"",jobsite:"",inquiryDate:"",quotationDate:"",amount:"",status:"",tc_customer_id:"",task_period_from_date:"",task_period_to_date:"",due_date:"",sub_total:0,tax:8,discount:0,total:0,tc_quotation_file:"",quotation_remarks:"",line_items:[]}),f=(0,o.Z)(j,2),v=f[0],Z=f[1],b=(0,i.useState)([]),y=(0,o.Z)(b,2),N=y[0],S=y[1],C=(0,i.useState)({}),w=(0,o.Z)(C,2),k=(w[0],w[1]),I=(0,i.useState)({id:0,customer_id:"",jobsite_id:"",customerName:"",jobsite:"",start_date:"",end_date:""}),D=(0,o.Z)(I,2),Y=D[0],P=D[1],q=(0,i.useState)([]),A=(0,o.Z)(q,2),F=(A[0],A[1],(0,i.useState)([])),M=(0,o.Z)(F,2),O=M[0],T=M[1],R=(0,i.useState)([]),L=(0,o.Z)(R,2),J=L[0],Q=L[1],V=function(e){E.Z.post("/api/tc/get-quotation",{id:+e}).then((function(e){var t=e.data.data;Z({id:null===t||void 0===t?void 0:t.id,customer_id:null===t||void 0===t?void 0:t.tc_customer_id,jobsite_id:null===t||void 0===t?void 0:t.tc_customer_job_site_id,customerName:null===t||void 0===t?void 0:t.customer_name,jobsite:null===t||void 0===t?void 0:t.jobsite_name,inquiryDate:null!==t&&void 0!==t&&t.inquiry_date?B()(null===t||void 0===t?void 0:t.inquiry_date).format("DD-MM-YYYY HH:mm A"):"",quotationDate:B()(null===t||void 0===t?void 0:t.task_period_from_date).format("DD-MM-YYYY"),amount:null===t||void 0===t?void 0:t.total,status:(null===t||void 0===t?void 0:t.status)||"Quote Sent",tc_customer_id:null===t||void 0===t?void 0:t.tc_customer_id,task_period_from_date:B()(null===t||void 0===t?void 0:t.task_period_from_date),task_period_to_date:B()(null===t||void 0===t?void 0:t.task_period_to_date),due_date:B()(null===t||void 0===t?void 0:t.due_date).format("DD-MM-YYYY"),sub_total:(null===t||void 0===t?void 0:t.sub_total)||0,tax:(null===t||void 0===t?void 0:t.gst)||8,discount:(null===t||void 0===t?void 0:t.discount)||0,total:null===t||void 0===t?void 0:t.total,tc_quotation_file:null===t||void 0===t?void 0:t.tc_quotation_file,quotation_remarks:(null===t||void 0===t?void 0:t.quotation_remarks)||"",line_items:(null===t||void 0===t?void 0:t.line_items)||[]}),console.log(v),t.tc_customer_id&&H(t.tc_customer_id)})).catch((function(e){console.log(e)}))},H=function(e){E.Z.post("/api/tc/get-customer",{id:e}).then((function(e){var t,n,i,s,a,o,l,c,r,d,u,m,h=e.data.data;if(h.other_details){var j=JSON.parse(h.other_details);h=(0,g.Z)((0,g.Z)({},h),j)}_({customerId:h.id,email:h.email,name:h.name,phone:h.phone,status:h.status,profile_pic:null===(t=h)||void 0===t?void 0:t.profile_pic,contact_name:null===(n=h)||void 0===n?void 0:n.contact_name,office_contact_number:null===(i=h)||void 0===i?void 0:i.office_contact_number,uen_number:null===(s=h)||void 0===s?void 0:s.uen_number,postal_code:(null===(a=h)||void 0===a?void 0:a.postal_code)||"000000",block_number:(null===(o=h)||void 0===o?void 0:o.block_number)||"",level_number:(null===(l=h)||void 0===l?void 0:l.level_number)||"",unit_number:(null===(c=h)||void 0===c?void 0:c.unit_number)||"",street_number:(null===(r=h)||void 0===r?void 0:r.street_number)||"",country:(null===(d=h)||void 0===d?void 0:d.country)||"Singapore",created_by:(null===(u=h)||void 0===u?void 0:u.created_by)||"",other_details:null===(m=h)||void 0===m?void 0:m.other_details}),console.log(x)})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){E.Z.post("/api/tc/get-service_entry_sheet",{id:+n.id}).then((function(e){var t=e.data.data;k(t),P(t),S(null!==t&&void 0!==t&&t.line_items?JSON.parse(null===t||void 0===t?void 0:t.line_items):[]);var n=t.line_items?JSON.parse(null===t||void 0===t?void 0:t.line_items).reduce((function(e,t){return e+t.total}),0):0,i=.09*n||0,s=0;i&&(s=n+i),Q([{text:"Subtotal",amt:"".concat(n||0)},{text:"GST",amt:"".concat(i.toFixed(2)||0),tag:{text:"9%",color:"#0099A8"}}]),T([{text:"Grand Total",amt:s.toFixed(2)}]),console.log(Y),V(t.tc_quotation_id),t.tc_customer_id&&H(t.tc_customer_id)})).catch((function(e){console.log(e)}))}),[]),(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(m.Z,{svg:h.RP,title:"Contracts / View Work Order"}),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(K.Z,{className:"quotation-card",children:(0,p.jsxs)("div",{ref:e,children:[(0,p.jsx)(K.Z,{className:Pt,children:(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(Mt,{strong:!0,children:x.name}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{children:"".concat(x.block_number," ").concat(x.street_number,", ").concat(x.level_number,", ").concat(x.unit_number)}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{children:"".concat(x.country,", ").concat(x.postal_code)}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{strong:!0,children:"Customer ID: "}),(0,p.jsx)(Mt,{children:x.customerId}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{strong:!0,children:"Tel Number: "}),(0,p.jsx)(Mt,{children:x.phone}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{strong:!0,children:"Jobsite: "}),(0,p.jsx)(Mt,{children:Y.job_site_name})]}),(0,p.jsxs)("div",{className:"text-left pr-4",children:[(0,p.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:"Service Entry Sheet"}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsxs)("div",{className:"mr-5",children:[(0,p.jsx)(Mt,{strong:!0,children:"Service Entry No: "}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{strong:!0,children:"Target Completion Date: "}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{strong:!0,children:"Actual Completion Date: "}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{strong:!0,children:"GL Number"}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{strong:!0,children:"Co Regn No"}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{strong:!0,children:"project_number"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)(Mt,{children:["#",Y.id]}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{children:B()(Y.target_completion_date).format("DD-MM-YYYY")}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{children:B()(Y.actual_completion_date).format("DD-MM-YYYY")}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{children:Y.gl_number}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{children:Y.co_regn_no}),(0,p.jsx)("br",{}),(0,p.jsx)(Mt,{children:Y.project_number}),(0,p.jsx)("br",{})]})]})]})]})}),(0,p.jsx)("div",{children:(0,p.jsxs)(X.Z,{children:[(0,p.jsxs)($.Z,{span:3,children:[(0,p.jsx)(Ft,{level:4,children:"Sr. No."}),(0,p.jsx)(ce.ZP,{dataSource:N,renderItem:function(e,t){return(0,p.jsx)(ce.ZP.Item,{className:" pl-0 border-0",children:t+1},e.name)}})]}),(0,p.jsx)($.Z,{span:21,children:(0,p.jsxs)(X.Z,{children:[(0,p.jsxs)($.Z,{span:8,children:[(0,p.jsx)(Ft,{level:4,children:"Description"}),(0,p.jsx)(ce.ZP,{dataSource:N,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.name})},e.name)}})]}),(0,p.jsxs)($.Z,{span:5,children:[(0,p.jsx)(Ft,{level:4,children:" Qty"}),(0,p.jsx)(ce.ZP,{dataSource:N,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.quantity})},e.quantity)}})]}),(0,p.jsxs)($.Z,{span:5,children:[(0,p.jsx)(Ft,{level:4,children:"Unit "}),(0,p.jsx)(ce.ZP,{dataSource:N,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.price})},e.price)}})]}),(0,p.jsxs)($.Z,{span:6,children:[(0,p.jsx)(Ft,{level:4,children:"SUBTOTAL(S$)"}),(0,p.jsx)(ce.ZP,{dataSource:N,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0",children:(0,p.jsx)("div",{style:{height:"32px"},className:"d-flex align-items-center",children:e.total})},e.total)}})]})]})})]})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)("div",{className:"d-flex justify-content-end",children:(0,p.jsxs)(X.Z,{style:{width:"40%"},className:"d-flex justify-content-center",children:[(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:J,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center ",children:[(0,p.jsx)(Mt,{strong:!0,children:e.text}),e.tag&&(0,p.jsx)("div",{className:"".concat(qt," align-items-center"),children:(0,p.jsx)("span",{style:{background:e.tag.color,padding:"1.5px 4px"},className:"ml-2 ",children:e.tag.text})})]})},e.text)}})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:J,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center",children:["S$ ",e.amt]})},e.amt)}})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:O,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsx)("div",{className:"d-flex align-items-center ",children:(0,p.jsx)(Mt,{strong:!0,children:e.text})})},e.text)}})}),(0,p.jsx)($.Z,{span:12,children:(0,p.jsx)(ce.ZP,{dataSource:O,renderItem:function(e){return(0,p.jsx)(ce.ZP.Item,{className:"pl-0 border-0 d-flex justify-content-center",children:(0,p.jsxs)("div",{className:"d-flex align-items-center",children:["S$ ",e.amt]})},e.amt)}})})]})}),(0,p.jsx)(re.Z,{}),(0,p.jsx)("div",{className:"mt-5 d-flex justify-content-start",style:{fontSize:"14px"},children:(0,p.jsxs)("div",{style:{width:"40%"},children:[(0,p.jsx)(re.Z,{}),(0,p.jsx)("h5",{children:(0,p.jsx)("b",{children:"Grand Energy Technologies Pte Ltd"})}),(0,p.jsx)("div",{style:{color:"#72849A"},children:"Officer Incharge"}),(0,p.jsx)("div",{style:{color:"#72849A"},children:v.quotationDate})]})})]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between ".concat(At),children:[(0,p.jsx)("div",{children:(0,p.jsx)(c.Z,{onClick:function(){t.goBack()},children:"Back"})}),(0,p.jsxs)(c.Z,{onClick:function(){console.log("Downloading Contract..."),(0,Le.ZP)(e,Ot,{filename:"Contract.pdf"})},children:[(0,p.jsx)(u.Z,{component:he.p5}),"Download PDF"]})]})]})]})},Et=function(){var e=(0,s.$B)();return(0,p.jsxs)("div",{children:[(0,p.jsx)(s.AW,{path:"".concat(a.sH,"/contract-management"),exact:!0,children:(0,p.jsx)(s.l_,{to:"".concat(e.path,"/quotations")})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/quotations"),exact:!0,children:(0,p.jsx)(V,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/quotations/add-new-quotation"),exact:!0,children:(0,p.jsx)(le,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/quotations/add-new-quotation/:inquiry_id"),exact:!0,children:(0,p.jsx)(le,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/quotations/view-quotation/:id"),exact:!0,children:(0,p.jsx)(ct,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/quotations/record-new-payment/:quotation_id"),exact:!0,children:(0,p.jsx)(Me,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/quotations/generate-invoice/:quotation_id"),exact:!0,children:(0,p.jsx)(ut,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/quotations/view-invoice/:id"),exact:!0,children:(0,p.jsx)(vt,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/quotations/edit-invoice/:id"),exact:!0,children:(0,p.jsx)(ut,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/contracts"),exact:!0,children:(0,p.jsx)(Re,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/work-orders/view-work-order/:id"),exact:!0,children:(0,p.jsx)(et,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/work-orders/view-service/:id"),exact:!0,children:(0,p.jsx)(Tt,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/contracts/view-contract-details/:id"),exact:!0,children:(0,p.jsx)(Yt,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/contracts/send-invoice"),exact:!0,children:(0,p.jsx)(Ie,{})}),(0,p.jsx)(s.AW,{path:"".concat(e.path,"/work-orders"),exact:!0,children:(0,p.jsx)(wt,{})})]})}},96110:function(e,t,n){var i=n(1413),s=n(29439),a=n(78756),o=n(72791),l=n(64946),c=n(93271),r=n(83832),d=n(19741),u=n(40008),m=n(40872),x=n(81838),h=n(81541),_=n(87309),j=n(72426),f=n.n(j),p=n(80184);t.Z=function(e){var t=e.searchText,n=e.custId,j=(0,o.useState)([]),v=(0,s.Z)(j,2),g=v[0],Z=v[1],b=(0,o.useState)(!1),y=(0,s.Z)(b,2),N=y[0],S=y[1],C=localStorage.getItem("token"),w=[{title:"ID",dataIndex:"id"},{title:"Contract ID",dataIndex:"tc_contract_id"},{title:"Jobsite Name",dataIndex:"jobsite_name"},{title:"Total Tasks",dataIndex:"total_tasks"},{title:"Net Amount (S$)",dataIndex:"total"},{title:"Paid amount (S$)",dataIndex:"amount_paid",render:function(e,t){return(0,p.jsx)("div",{children:t.amount_paid||0})}},{title:"Invoice Date",dataIndex:"created_at",render:function(e,t){return(0,p.jsx)("div",{children:f()(t.created_at).format("DD-MM-YYYY")})}},{title:"Status",dataIndex:"status",render:function(e,t){return"Paid"===t.status||"PAID"===t.status?(0,p.jsx)("span",{style:{color:"#00AB6F",backgroundColor:"#EDFFF9",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:"Paid"}):"Overdue"===t.status||"OVERDUE"===t.status?(0,p.jsx)("span",{style:{color:"#F53434",backgroundColor:"#FFF2F2",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:"Overdue"}):(0,p.jsx)("span",{style:{color:"#FFC700",backgroundColor:"#FFC7001A",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:"Pending"})}},{title:"Action",render:function(e,t){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(m.Z,{menu:(0,p.jsxs)(x.Z,{children:[(0,p.jsx)(x.Z.Item,{children:(0,p.jsxs)(d.rU,{to:"/app/contract-management/quotations/view-invoice/".concat(t.id),className:"d-flex align-items-center",children:[(0,p.jsx)(l.Z,{component:c.Tx}),"View Invoice"]})}),(0,p.jsx)(x.Z.Item,{children:(0,p.jsxs)(d.rU,{to:"/app/contract-management/quotations/edit-invoice/".concat(t.id),className:"d-flex align-items-center",children:[(0,p.jsx)(l.Z,{className:"mr-2",component:r.dY}),"Edit"]})}),(0,p.jsx)(x.Z.Item,{onClick:function(){D()},children:(0,p.jsxs)("span",{className:"d-flex align-items-center",children:[(0,p.jsx)(l.Z,{className:"mr-2",component:r.pJ}),"Delete"]})}),(0,p.jsx)(h.Z,{visible:N,centered:!0,footer:[(0,p.jsx)(_.Z,{style:{color:"#000B23"},onClick:k,className:"font-weight-bold",children:"No, Cancel"}),(0,p.jsx)(_.Z,{type:"primary",className:"font-weight-bold",onClick:function(){return I(t.id)},children:"Yes, Confirm"})],children:(0,p.jsx)("div",{style:{color:"#000B23"},className:"font-weight-bolder font-size-md",children:"Are Sure you want to delete this invoice?"})})]})})})}}],k=function(){S(!1)},I=function(e){Y(e),S(!1)},D=function(){S(!0)},Y=function(e){console.log("Invoice deleted",e),(0,u.Z)({method:"post",url:"/api/tc/delete-invoice",data:{id:e},headers:{Authorization:"Bearer ".concat(C)}}).then((function(t){console.log(t.data),Z(g.filter((function(t){return t.id!==e})))})).then((function(e){console.log(e)}))};return(0,o.useEffect)((function(){var e={customer_id:n};(0,u.Z)({method:"post",url:"/api/tc/get-invoices",data:e}).then((function(e){console.log(e.data),e.data.success?Z(e.data.data.data.map((function(e,t){return(0,i.Z)((0,i.Z)({},e),{},{index:t+1})}))):console.log(e)})).then((function(e){console.log(e)}))}),[]),(0,o.useEffect)((function(){var e={customer_id:n,search:t};(0,u.Z)({method:"post",url:"/api/tc/get-invoices",data:e}).then((function(e){console.log(e.data),e.data.success?Z(e.data.data.data.map((function(e,t){return(0,i.Z)((0,i.Z)({},e),{},{index:t+1})}))):console.log(e)})).then((function(e){console.log(e)}))}),[t]),(0,p.jsx)("div",{children:(0,p.jsx)(a.Z,{columns:w,dataSource:g})})}},73034:function(e,t,n){var i=n(1413),s=n(29439),a=n(78756),o=n(72791),l=(n(93271),n(40008)),c=n(72426),r=n.n(c),d=n(80184),u=[];t.Z=function(e){var t=e.searchText,n=e.custId,c=(0,o.useState)(u),m=(0,s.Z)(c,2),x=m[0],h=m[1],_=[{title:"ID",dataIndex:"id"},{title:"Contract ID",dataIndex:"id"},{title:"Jobsite Name",dataIndex:"jobSite"},{title:"Total Tasks",dataIndex:"tasks"},{title:"Net Amount(S$)",dataIndex:"netAmount"},{title:"Paid Amount(S$)",dataIndex:"paid",render:function(e,t){return(0,d.jsx)("div",{children:t.amount_paid||0})}},{title:"Payment Date",dataIndex:"created_at",render:function(e,t){return(0,d.jsx)("div",{children:r()(t.created_at).format("DD-MM-YYYY")})}},{title:"Status",dataIndex:"status",render:function(e,t){return"Paid"===t.status||"PAID"===t.status?(0,d.jsx)("span",{style:{color:"#00AB6F",backgroundColor:"#EDFFF9",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:"Paid"}):"Overdue"===t.status||"OVERDUE"===t.status?(0,d.jsx)("span",{style:{color:"#F53434",backgroundColor:"#FFF2F2",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:"Overdue"}):(0,d.jsx)("span",{style:{color:"#FFC700",backgroundColor:"#FFC7001A",padding:"4px 8px",borderRadius:"6px",fontWeight:"600",fontSize:"14px"},children:"Pending"})}}];return(0,o.useEffect)((function(){var e={customer_id:n};(0,l.Z)({method:"post",url:"/api/tc/get-payment",data:e}).then((function(e){console.log(e.data),e.data.success?h(e.data.data.data.map((function(e,t){return(0,i.Z)((0,i.Z)({},e),{},{index:t+1})}))):console.log(e)})).then((function(e){console.log(e)}))}),[]),(0,o.useEffect)((function(){var e={customer_id:n,search:t};(0,l.Z)({method:"post",url:"/api/tc/get-payment",data:e}).then((function(e){console.log(e.data),e.data.success?h(e.data.data.data.map((function(e,t){return(0,i.Z)((0,i.Z)({},e),{},{index:t+1})}))):console.log(e)})).then((function(e){console.log(e)}))}),[t]),(0,d.jsx)("div",{children:(0,d.jsx)(a.Z,{columns:_,dataSource:x})})}},11673:function(e,t,n){n.d(t,{SC:function(){return s},le:function(){return a}});var i=n(80184),s=function(){return(0,i.jsxs)("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M8 8C10.21 8 12 6.21 12 4C12 1.79 10.21 0 8 0C5.79 0 4 1.79 4 4C4 6.21 5.79 8 8 8ZM8 2C9.1 2 10 2.9 10 4C10 5.1 9.1 6 8 6C6.9 6 6 5.1 6 4C6 2.9 6.9 2 8 2Z",fill:"#455560"}),(0,i.jsx)("path",{d:"M2 14C2.22 13.28 5.31 12 8 12C8 11.3 8.13 10.63 8.35 10.01C5.62 9.91002 0 11.27 0 14V16H9.54C9.02 15.42 8.61 14.75 8.35 14H2Z",fill:"#455560"}),(0,i.jsx)("path",{d:"M17.43 14.02C17.79 13.43 18 12.74 18 12C18 9.79 16.21 8 14 8C11.79 8 10 9.79 10 12C10 14.21 11.79 16 14 16C14.74 16 15.43 15.78 16.02 15.43C16.95 16.36 17.64 17.05 18.59 18L20 16.59C18.5 15.09 19.21 15.79 17.43 14.02ZM14 14C12.9 14 12 13.1 12 12C12 10.9 12.9 10 14 10C15.1 10 16 10.9 16 12C16 13.1 15.1 14 14 14Z",fill:"#455560"})]})},a=function(){return(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("g",{clipPath:"url(#clip0_886_13838)",children:(0,i.jsx)("path",{d:"M11 12C13.21 12 15 10.21 15 8C15 5.79 13.21 4 11 4C8.79 4 7 5.79 7 8C7 10.21 8.79 12 11 12ZM11 6C12.1 6 13 6.9 13 8C13 9.1 12.1 10 11 10C9.9 10 9 9.1 9 8C9 6.9 9.9 6 11 6ZM5 18C5.2 17.37 7.57 16.32 9.96 16.06L12 14.06C11.61 14.02 11.32 14 11 14C8.33 14 3 15.34 3 18V20H12L10 18H5ZM20.6 12.5L15.47 17.67L13.4 15.59L12 17L15.47 20.5L22 13.91L20.6 12.5Z",fill:"#475569"})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_886_13838",children:(0,i.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]})}},18538:function(e){e.exports="data:image/png;base64,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"},89536:function(e){e.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=727.1961eafe.chunk.js.map