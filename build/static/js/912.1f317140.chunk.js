"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[912],{99408:function(e,t,r){r.d(t,{Z:function(){return g}});var s=r(40008),a=r(59305),o=r(30390).lX(),n=r(15471),i=r(13085),l=s.Z.create({baseURL:a.CT,timeout:6e4}),c="/auth/login";l.interceptors.request.use((function(e){var t=localStorage.getItem(n.UA);return t&&(e.headers.authorization=t),t||e.headers["public-request"]||(o.push(c),window.location.reload()),e}),(function(e){i.Z.error({message:"Error"}),Promise.reject(e)})),l.interceptors.response.use((function(e){return e.data}),(function(e){var t={message:""};return 400!==e.response.status&&403!==e.response.status||(t.message="Authentication Fail",t.description="Please login again",localStorage.removeItem(n.UA),o.push(c),window.location.reload()),404===e.response.status&&(t.message="Not Found"),500===e.response.status&&(t.message="Internal Server Error"),508===e.response.status&&(t.message="Time Out"),i.Z.error(t),Promise.reject(e)}));var u=l,m={login:function(e){return u({url:"/posts",method:"post",headers:{"public-request":"true"},data:e})},signUp:function(e){return u({url:"/auth/signup",method:"post",headers:{"public-request":"true"},data:e})}},g=m},84912:function(e,t,r){r.r(t);var s=r(1413),a=(r(72791),r(54153)),o=r(66106),n=r(30914),i=r(66871),l=r(60364),c=r(80184),u={backgroundImage:"url(/img/others/img-17.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover"};t.default=function(e){var t=(0,l.v9)((function(e){return e.theme.currentTheme}));return(0,c.jsx)("div",{className:"h-100",style:u,children:(0,c.jsx)("div",{className:"container d-flex flex-column justify-content-center h-100",children:(0,c.jsx)(o.Z,{justify:"center",children:(0,c.jsx)(n.Z,{xs:20,sm:20,md:20,lg:7,children:(0,c.jsx)(i.Z,{children:(0,c.jsxs)("div",{className:"my-4",children:[(0,c.jsx)("div",{className:"text-center",children:(0,c.jsx)("img",{className:"img-fluid",src:"/img/".concat("light"===t?"grand-energy-logo.png":"grand-energy-logo-white.png"),alt:""})}),(0,c.jsx)(o.Z,{justify:"center",children:(0,c.jsx)(n.Z,{xs:24,sm:24,md:20,lg:20,children:(0,c.jsx)(a.Z,(0,s.Z)({},e))})})]})})})})})})}},54153:function(e,t,r){r.d(t,{Z:function(){return j}});var s=r(29439),a=r(72791),o=r(60364),n=r(33441),i=r(73332),l=r(49389),c=r(87309),u=r(99214),m=r(38999),g=(r(67471),r(80184)),d=r(80680),h=(r(99408),r(88515)),p=r(26872),f=r(40008),x=function(e){var t=(0,h.k6)(),r=(0,a.useState)(!1),o=(0,s.Z)(r,2),d=(o[0],o[1],localStorage.getItem("token")),x=(e.otherSignIn,e.showForgetPassword),w=e.hideAuthMessage,j=e.onForgetPasswordClick,v=e.showLoading,Z=e.extra,y=(e.loading,e.showMessage),I=e.message,S=(e.authenticated,e.showAuthMessage,e.redirect),k=e.allowRedirect;return(0,a.useEffect)((function(){d&&k&&(void(0,f.Z)({method:"get",url:"/api/getLoggedInUsersDetails",headers:{Authorization:"Bearer ".concat(d)},data:{}}).then((function(e){return!!e.data.success})).catch((function(e){return console.log(e.message),401==e.status?localStorage.clear():I.error("Something went wrong! please try again later"),!1}))&&t.push(S),t.push(S));y&&setTimeout((function(){w()}),3e3)}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.ww.div,{initial:{opacity:0,marginBottom:0},animate:{opacity:y?1:0,marginBottom:y?20:0},children:(0,g.jsx)(n.Z,{type:"error",showIcon:!0,message:I})}),(0,g.jsxs)(i.Z,{layout:"vertical",name:"login-form",onFinish:function(e){(0,f.Z)({method:"post",url:"/api/mobile-app/login",data:{email:e.email,password:e.password,grandEneryCustomer:!0}}).then((function(e){v(!1);var r=e.data;if(console.log(r),r.token.token){var s=r.user,a=r.customer,o=r.customer_user;return console.log(s),localStorage.clear(),f.Z.defaults.headers.common.Authorization="Bearer "+e.data.token.token,localStorage.setItem("token",r.token.token),localStorage.setItem("user_id",s.id),localStorage.setItem("customer_id",a.id),localStorage.setItem("customer_name",a.name),localStorage.setItem("associate_user_id",o.id),localStorage.setItem("name",o.name),localStorage.setItem("email",o.email),localStorage.setItem("profile_pic",o.profile_pic),t.push(S),!0}return r.errors?(console.log(r.errors.message),I.error(r.errors.message)):I.error("Something went wrong! please try again later"),!1})).catch((function(e){return console.log(e),localStorage.removeItem("name"),localStorage.removeItem("email"),localStorage.removeItem("profile_pic"),!1}))},children:[(0,g.jsx)(i.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email"},{type:"email",message:"Please enter a validate email!"}],children:(0,g.jsx)(l.Z,{prefix:(0,g.jsx)(u.Z,{className:"text-primary"})})}),(0,g.jsx)(i.Z.Item,{name:"password",label:(0,g.jsxs)("div",{className:"".concat(x?"d-flex justify-content-between w-100 align-items-center":""),children:[(0,g.jsx)("span",{children:"Password"}),x&&(0,g.jsx)("span",{onClick:function(){return j},className:"cursor-pointer font-size-sm font-weight-normal text-muted",children:"Forget Password?"})]}),rules:[{required:!0,message:"Please input your password"}],children:(0,g.jsx)(l.Z.Password,{prefix:(0,g.jsx)(m.Z,{className:"text-primary"})})}),(0,g.jsx)(i.Z.Item,{children:(0,g.jsx)(c.Z,{type:"primary",htmlType:"submit",block:!0,children:"Login"})}),Z]})]})};x.defaultProps={otherSignIn:!0,showForgetPassword:!1};var w={showAuthMessage:d.dV,showLoading:d.QP,hideAuthMessage:d.oj,authenticated:d.x9},j=(0,o.$j)((function(e){var t=e.auth;return{loading:t.loading,message:t.message,showMessage:t.showMessage,token:t.token,redirect:t.redirect}}),w)(x)}}]);
//# sourceMappingURL=912.1f317140.chunk.js.map